import React, { useState, useEffect }
from 'react';
import {
  Aperture, Wand2, Clipboard, Brain, Loader2, ServerCrash, ChevronDown,
  Check, User, Mountain, TextQuote, Sparkles
} from 'lucide-react';

// --- TONY STUDIO å“ç‰Œæ ¸å¿ƒå…ƒç´  (æºè‡ªæ‚¨çš„ .docx æ–‡ä»¶) ---
const TONY_STUDIO_PILLARS = [
  { id: 'philosophy', name: 'é“ Ã— æ™ºï¼šäººé–“æ™ºæ…§ç³»åˆ—'
  },
  { id: 'nature', name: 'å¤©åœ°ç‚ºå¸«ï¼šè‡ªç„¶æ³•å‰‡ç³»åˆ—'
  },
  { id: 'culture', name: 'ä¸–ç•Œäººæ–‡ Ã— æ–‡åŒ–æ¢ç´¢ç³»åˆ—'
  },
  { id: 'leadership', name: 'åŠ›é‡ Ã— åœ˜éšŠ Ã— é ˜å°è€…ç³»åˆ—'
  },
  { id: 'emotion', name: 'å–„è‰¯ Ã— å®¶åº­ Ã— æƒ…æ„Ÿç³»åˆ—'
  },
  { id: 'design', name: 'è¨­è¨ˆå¸« Ã— æ€ç¶­æ¶æ§‹å¸«ç³»åˆ—'
  },
  // V4.2: æ–°å¢å…©å¤§æ•˜äº‹æ”¯æŸ±
  { id: 'technology', name: 'ç§‘æŠ€æ‡‰ç”¨ Ã— æœªä¾†å‰µæ–°ç³»åˆ—'
  },
  { id: 'surreal', name: 'å¤©é¦¬è¡Œç©º Ã— è¶…ç¾å¯¦å‰µæ„ç³»åˆ—'
  },
  // V4.3: æ–°å¢å¯µç‰©ç³»åˆ—
  { id: 'pets', name: 'ğŸ¾ TONY STUDIO å¯µç‰©å¯æ„›ç³»åˆ—'
  },
  // V4.4: æ–°å¢è¡¨æ¼”è—è¡“èˆ‡è¡—é ­è—äººç³»åˆ—
  { id: 'performing_arts', name: 'TONY STUDIOâ€”æ¼”å¥ Ã— æ­Œå”± Ã— èˆè¹ˆè¡¨æ¼”ç³»åˆ—'
  },
  { id: 'street_performer', name: 'è¡—é ­è—äººè¡¨æ¼”ç³»åˆ— Street Performer Series'
  },
  // V4.5: æ–°å¢å»£å‘Šã€ç½é›£ã€å¾©å¤ç³»åˆ—
  { id: 'advertising', name: 'ğŸ¯ å»£å‘Šå‰µæ„ Ã— å“ç‰Œæ´å¯Ÿ'
  },
  { id: 'disaster', name: 'ğŸŒªï¸ ç½é›£ç‰‡ Ã— åŠ‡æƒ…å¼µåŠ›'
  },
  { id: 'retro', name: 'ğŸï¸ å¾©å¤é¢¨ Ã— æ™‚ä»£ç¾å­¸'
  },
  // V4.6: æ–°å¢ä¸–ç•Œæ™¯è§€èˆ‡ 24 ç¯€æ°£ç³»åˆ—
  { id: 'world_landscape', name: 'ğŸŒ ä¸–ç•Œçš„é¢¨æ™¯ Ã— æ™¯è§€ Ã— ç¿’ä¿—ç³»åˆ—'
  },
  { id: 'solar_terms', name: 'ğŸ‚ ä¸­åœ‹ 24 ç¯€æ°£ Ã— æ™‚ä»¤å“²å­¸ç³»åˆ—'
  },
  // V4.7: æ–°å¢åäººå°è©±èˆ‡ä¸–ç•Œåè‘—ç³»åˆ—
  { id: 'dialogue_celebrity', name: 'ğŸŒ èˆ‡ä¸–ç•Œåäººå°è©±ç³»åˆ—'
  },
  { id: 'dialogue_classics', name: 'ğŸ“š ä¸–ç•Œåè‘— Ã— ç«¥è©± Ã— è«ºèªç³»åˆ—'
  },
  // V4.8: æ–°å¢ç™¾å·¥ç™¾æ¥­èˆ‡ä¸–ç•Œç¯€æ—¥ç³»åˆ—
  { id: 'industry', name: 'ğŸŒ± ç™¾å·¥ç™¾æ¥­ Ã— ç”Ÿæ…‹æ™ºæ…§ç³»åˆ—'
  },
  { id: 'festivals', name: 'ğŸ‰ ä¸–ç•Œç¯€æ—¥ Ã— ç¿’ä¿—å„€å¼ç³»åˆ—'
  },
  // V4.13: æ–°å¢ TONY è€å¸« å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ—
  { id: 'youthful_joy', name: 'ğŸš€ å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ— (For Youth)'
  },
  // V4.15: æ–°å¢ TONY è€å¸« é£²é£Ÿæ–‡åŒ– Ã— å»šè—å“²å­¸ç³»åˆ—
  { id: 'culinary_arts', name: 'ğŸ½ï¸ é£²é£Ÿæ–‡åŒ– Ã— å»šè—å“²å­¸ç³»åˆ—'
  },
  // V4.16: æ–°å¢ TONY è€å¸« å°ç£å¯¶å³¶ Ã— åœ°æ–¹å‰µç”Ÿç³»åˆ—
  { id: 'taiwan_local', name: 'ğŸ‡¹ğŸ‡¼ å°ç£å¯¶å³¶ Ã— åœ°æ–¹å‰µç”Ÿç³»åˆ—'
  },
  // V4.17: æ–°å¢ TONY è€å¸« è¬ç‰©æœ‰éˆ Ã— å¥‡å¹»å°è©±ç³»åˆ—
  { id: 'animal_dialogue', name: 'ğŸ¦“ è¬ç‰©æœ‰éˆ Ã— å¥‡å¹»å°è©±ç³»åˆ—'
  },
];

// --- V4.9: å®Œæ•´ä¿®å¾©æ‰€æœ‰ä¸»é¡Œè®Šæ•¸è³‡æ–™åº« ---
const THEME_VARIABLES = {
  philosophy: [
    // A. é“ Ã— æ™ºï¼ˆå“²å­¸æ™ºæ…§é¡ï¼‰20 å¥—
    "çœ‹é æ‰èµ°å¾—ç©©", "é«˜åº¦åœ¨å¿ƒä¸æ˜¯å¤©", "éœä¸‹ä¾†æ‰è½å¾—è¦‹", "é¸æ“‡æ¯”åŠªåŠ›é‡è¦", "å¿ƒå®šï¼Œè·¯å°±ä¸äº‚",
    "è¶Šå–„è‰¯è¶Šæœ‰åŠ›é‡", "æˆé•·æ˜¯éœé»˜ç´¯ç©", "çœŸæ­£çš„å‹‡æ°£æ˜¯æº«æŸ”", "æ”¾ä¸‹æ‰èƒ½å‘å‰", "å¿ƒèƒ½çœ‹å¤šé ",
    "æ–¹å‘æ¯”é€Ÿåº¦é‡è¦", "ç”¨å¿ƒçœ‹ä¸–ç•Œ", "äººé–“æ™ºæ…§", "å…‰åœ¨å¿ƒè£¡å…ˆäº®", "èµ°å¾—æ…¢ä¹Ÿæœƒåˆ°",
    "ä¸çˆ­è€Œå‹", "ä¸èªè€Œæ˜", "é“åœ¨å¹³å¸¸", "ä¸€åˆ‡çš†é¸æ“‡", "çœ‹æ‡‚è‡ªå·±æ‰çœ‹æ‡‚ä¸–ç•Œ",
    // A. é“ Ã— æ™º Ã— å“²å­¸æ´å¯Ÿï¼ˆ101â€“130ï¼‰
    "éœçœ‹ä¸–ç•Œ", "å¿ƒèƒ½è¼‰èˆŸ", "ç„¡è²ä¹‹å…‰", "å¿ƒçš„ç§©åº", "é¢¨çš„ç­”æ¡ˆ", "å¿ƒå¿µæˆè·¯", "æº«æŸ”è‡ªå¼·",
    "é“åœ¨æ—¥å¸¸", "è¶Šéœè¶Šæ˜", "å±±å¤–æœ‰å¿ƒ", "å…‰çš„æ–¹å‘", "å¿ƒå®šå¦‚å±±", "æ²‰é»˜çš„å‹‡æ°£", "åœ¨å¿ƒä¹‹ä¸Š",
    "ç´°ç¯€è¦‹é­‚", "çœŸç†åœ¨å¾®å…‰", "å¿ƒæ¯”é æ–¹å¤§", "ä¿¡å¿µæˆå½¢", "è¦ºé†’ä¹‹åˆ»", "æŠ¬é ­çš„æ™ºæ…§",
    "å¿ƒæœ‰èƒ½é‡", "å …å®šçš„æ¸©åº¦", "åœ¨å¿ƒçš„æ·±è™•", "å…‰åœ¨ä½ è£¡é¢", "å¿ƒçš„ç–†ç•Œ", "ç„¡è²çš„åŠ›é‡",
    "æ–¹å‘åœ¨å¿ƒè£¡", "éˆé­‚çš„æº–åº¦", "è¶Šç†è§£è¶Šè‡ªç”±", "å¿ƒçš„å°ºåº¦"
  ],
  nature: [
    // B. å¤©åœ°ç‚ºå¸«ï¼ˆè‡ªç„¶å“²å­¸ï¼‰20 å¥—
    "èˆ‡æµ·åŒè¡Œ", "é¢¨æ‡‚æ–¹å‘", "æ˜Ÿå…‰æœƒæŒ‡è·¯", "å±±æ•™æˆ‘å …å®š", "æ²³æµæ‡‚å¾—å‰è¡Œ", "è‰åŸçš„å¯¬æ•",
    "é›²çš„è‡ªç”±", "é¯¨é­šçš„éœé»˜", "è€é·¹çš„é«˜åº¦", "æ£®æ—çš„æ™ºæ…§", "å…‰ç©¿é€é»‘æš—", "å››å­£çš„ç­”æ¡ˆ",
    "é›¨è½æœ‰è²", "é¢¨èµ·æœ‰æ„", "è‡ªç„¶åœ¨èªªè©±", "å¤§åœ°çš„è€å¿ƒ", "æµ·æµªçš„ç¯€å¥", "èŠ±é–‹çš„ç†è§£",
    "å¤œç©ºçš„å¯§éœ", "ç«ç„°çš„è¦ºé†’",
    // B. å¤©åœ°è‡ªç„¶ Ã— ç”Ÿå‘½è±¡å¾µï¼ˆ131â€“160ï¼‰
    "æµ·çš„å‘¼å¸", "é¢¨çš„è¨˜æ†¶", "é›¨çš„å–„æ„", "æ˜Ÿè½ä¹‹å¤œ", "å…‰ç©¿é›²éš™", "å¤§åœ°ä¹‹å¿ƒ", "å±±çš„è„ˆå‹•",
    "æ£®æ—è€³èª", "è½è‘‰çš„æ™ºæ…§", "å¤©ç©ºçš„ç¯€å¥", "æµ·æµªçš„æ€§æ ¼", "æ˜Ÿè¾°æœƒèªªè©±", "é›²æ‡‚è‡ªç”±",
    "ç«ç„°çš„èª•ç”Ÿ", "å½±å­çš„æ·±åº¦", "è‰åŸæ‡‚å¾—ç­‰", "é¢¨æš´çš„å¯“è¨€", "é›ªçš„å¯§éœ", "å¤œæµ·çš„çœ¼ç›",
    "æ²³æµçš„å“æ ¼", "å³½è°·çš„è€å¿ƒ", "é¢¨ä¸­çš„ç¥•å¯†", "å±±å·çš„èªè¨€", "å¤©å…‰çš„å–„æ„", "èŠ±çš„é ˜æ‚Ÿ",
    "é¢¨èƒ½çœ‹è¦‹", "æ˜¥çš„è¦ºé†’", "ç§‹çš„é‡é‡", "å†¬çš„ç´”ç²¹", "å¤çš„å¼µåŠ›"
  ],
  culture: [
    // C. ä¸–ç•Œæ–‡åŒ– Ã— äººæ–‡ç¾å­¸ï¼ˆç¯€æ…¶ & åŸå¸‚ï¼‰20å¥—
    "å¨å°¼æ–¯çš„çœ¼ç¥", "å·´è¥¿çš„å¿ƒè·³", "æ³°åœ‹çš„ç¥ç¦", "äº¬éƒ½çš„éœç¾", "å·´é»çš„éˆé­‚", "ç´ç´„çš„ç¯€å¥",
    "ç¥•é­¯çš„å‘¼å¸", "æ’’å“ˆæ‹‰çš„ä½èª", "ç¾©å¤§åˆ©çš„æµªæ¼«", "å°ç£çš„æº«åº¦", "åŸæ°‘çš„åŠ›é‡", "åŸå¸‚çš„äººæ–‡",
    "ä¸–ç•Œçš„å…±åŒèªè¨€", "æ—…é€”çš„ç­”æ¡ˆ", "é›•åˆ»æ™‚å…‰", "äººæ–‡çš„é‡é‡", "æ–‡åŒ–çš„å‘¼å¸", "èˆè¹ˆçš„éˆé­‚",
    "é¢å…·ä¸‹çš„çœŸå¯¦", "ä¸–ç•Œçš„å¿ƒè·³",
    // C. ä¸–ç•Œæ–‡åŒ– Ã— äººæ–‡ç¾å­¸ï¼ˆ161â€“180ï¼‰
    "å·´é»çš„æ­¥ä¼", "äº¬éƒ½çš„é¢¨", "æ‘©æ´›å“¥çš„æ˜Ÿç©º", "é˜¿æ ¹å»·çš„é­‚", "æ’’å“ˆæ‹‰çš„çœ¼ç¥", "ç¾…é¦¬çš„æ™‚é–“",
    "äº¬éƒ½çš„éœåº¦", "æ—…é€”çš„è„ˆæ", "åŸå¸‚çš„å‘¼å¸", "é¢å…·å¾Œçš„çœŸå¿ƒ", "ä¸–ç•Œçš„è©©æ„", "æ–‡åŒ–çš„æº«åº¦",
    "è¡—è§’çš„å‘½é‹", "ä¸–ç•Œçš„ä¸€ç¬", "å¿ƒåœ¨åœ°åœ–ä¸Š", "æ—…äººæœƒæ‡‚", "åœ¨åœ°çš„éˆé­‚", "é¢¨ä¸­çš„åŸå¸‚",
    "é æ–¹çš„å‘¼å–š", "ä¸–ç•Œçš„å…‰å½±"
  ],
  leadership: [
    // D. é ˜å° Ã— åœ˜éšŠ Ã— é‹å‹• 20 å¥—
    "æœ€å¾Œä¸‰ç§’çš„åŠ›é‡", "åœ˜éšŠçš„ä¿¡ä»»", "ä¸æ”¾æ£„çš„ç¬é–“", "é€†è½‰é–‹å§‹çš„æ™‚åˆ»", "ä¸€èµ·å®Œæˆä¸å¯èƒ½",
    "æ¯ä¸€æ­¥éƒ½ç®—æ•¸", "å‹‡æ°£åœ¨å¿ƒè·³ä¹‹é–“", "æ±ºå®šå‹è² çš„æ˜¯ä¿¡å¿µ", "ç«™èµ·ä¾†æ‰æ˜¯çœŸåŠ›é‡", "å’ŒéšŠå‹ä¸€èµ·æ›´å¼·å¤§",
    "è´çš„æ˜¯é¸æ“‡", "é«˜æ‰‹éƒ½æ˜¯å­¤ç¨ç·´æˆ", "çœŸæ­£çš„é ˜å°æ˜¯æ”¯æŒ", "ä¸èƒ½è¢«çœ‹æ‰è‡ªå·±", "å‹‡å¾€ç›´å‰çš„å…‰",
    "ç„¡ç•", "æŒçºŒå‰é€²", "ä¸€èµ·èµ°", "ä¿¡ä»»å°±æ˜¯åŠ›é‡", "å¿ƒè·³å°±æ˜¯ç¯€å¥",
    // D. é‹å‹• Ã— é ˜å° Ã— å›¢éšŠç²¾ç¥ï¼ˆ181â€“205ï¼‰
    "ä¿¡ä»»çš„ç¬é–“", "è¡ç·šä¹‹å‰", "åŠ›é‡çš„éˆé­‚", "å¸¶éšŠçš„å¿ƒæ³•", "å‹è² ä¹‹å¤–", "å…¨åŠ›ä»¥èµ´æ™‚",
    "é€†å¢ƒçš„ç¯€å¥", "å´›èµ·çš„æ™‚åˆ»", "æ¯ä¸€æ“Šéƒ½ç®—", "å‹‡æ°£çš„è‡¨ç•Œé»", "é«˜æ‰‹çš„æ²‰é»˜", "åœ˜éšŠçš„è„ˆæ",
    "æ±ºæˆ°å‰ä¸‰ç§’", "ä¸é€€å°±æ˜¯å‰é€²", "å¿ƒè·³çš„æŒ‡æ®", "é ˜å°çš„æº«åº¦", "å …æŒçš„å½¢ç‹€", "ç”¨ä¿¡å¿µå¥”è·‘",
    "é è‡ªå·±ç«™èµ·", "åœ˜éšŠçš„æ–¹å‘", "æˆç‚ºéšŠå‹çš„åŠ›é‡", "æŒºä½çš„åƒ¹å€¼", "å‹åˆ©çš„éœé»˜", "å¿ƒæ¯”æ¯”åˆ†å¤§",
    "ä¸€èµ·è®Šå¼·"
  ],
  // --- V4.9: è£œå›éºå¤±çš„ä¸»é¡Œ ---
  emotion: [
    // E. å–„è‰¯ Ã— å®¶åº­ Ã— æƒ…æ„Ÿ 10 å¥—
    "å®¶æ˜¯å¿ƒçš„æ–¹å‘", "æ„›æ˜¯æœ€å¤§çš„å‹‡æ°£", "é™ªä¼´æ˜¯æœ€ç¾çš„èªè¨€", "å–„è‰¯æœƒå›ä¾†", "å¿ƒè»Ÿä¸æ˜¯å¼±",
    "æ„›å®¶çš„äººæœ€å¼·å¤§", "æº«æŸ”çš„å …å®š", "ç‚ºå®¶è€Œèµ°", "æœ‰ä½ åœ¨å°±æ˜¯å…‰", "è¨˜æ†¶æ¯”æ™‚é–“æ›´é•·",
    // E. å®¶åº­ Ã— å–„è‰¯ Ã— æƒ…æ„Ÿ Ã— æ„›ï¼ˆ206â€“225ï¼‰
    "æ„›çš„ä»½é‡", "å®¶çš„æº«åº¦", "å›å®¶çš„æ–¹å‘", "å¿ƒæœ‰å®¶åœ¨", "æ„›æ˜¯ä¸€ç›ç‡ˆ", "æº«æš–çš„è­‰æ˜",
    "å®¶äººçš„åŠ›é‡", "å–„æ„æœƒå›ä¾†", "éˆé­‚çš„é å²¸", "å¿ƒæŸ”ä¹Ÿå …", "æ„›æœƒè¨˜å¾—", "å®¶æ¯”é æ–¹è¿‘",
    "å®ˆè­·çš„æ·±åº¦", "å¿ƒç›¸é æ™‚", "å®¶çš„å‘¼å¸", "æ„›çš„å¾®å…‰", "ä¸€èµ·èµ°å›å®¶", "é™ªä¼´çš„è³ªåœ°",
    "æ™‚å…‰çš„æ“æŠ±", "é è¿‘çš„åŠ›é‡"
  ],
  design: [
    // F. è¨­è¨ˆ Ã— ç¾å­¸ Ã— æ¶æ§‹ 10 å¥—
    "ç¾åœ¨å¹³è¡¡", "è¨­è¨ˆæ˜¯æ€è€ƒçš„å½¢ç‹€", "çµæ§‹å‰µé€ æ„ç¾©", "é‚è¼¯è®“ä¸–ç•Œæ›´ç¾", "æŠŠå¿ƒåšæˆä½œå“",
    "è¨­è¨ˆæ˜¯ä¸€ç¨®æ´å¯Ÿ", "æ€ç¶­çš„é«˜åº¦", "ç¾æ„Ÿçš„åŠ›é‡", "å‰µä½œæ˜¯é¸æ“‡", "æ¶æ§‹æ±ºå®šä¸€åˆ‡",
    // F. è¨­è¨ˆ Ã— ç¾å­¸ Ã— æ¶æ§‹ Ã— å‰µé€ ï¼ˆ226â€“250ï¼‰
    "ç¾åœ¨ç§©åº", "çµæ§‹çš„éˆé­‚", "ç¾å­¸èƒ½é‡", "è¨­è¨ˆçš„èªè¨€", "ç·šæ¢çš„æ™ºæ…§", "æ¯”ä¾‹çš„çœŸç†",
    "ç•™ç™½çš„åŠ›é‡", "å½¢å¼å³æ„Ÿå—", "è¼ªå»“çš„å“²å­¸", "å…‰å½±çš„é‚è¼¯", "æ§‹åœ–çš„å¿ƒæ³•", "å‰µä½œçš„å‹‡æ°£",
    "éˆæ„Ÿçš„åæ¨™", "ç¾æ„Ÿçš„æ–¹å‘", "è¨­è¨ˆçš„è„ˆå‹•", "é‚è¼¯çš„å½¢ç‹€", "é¡è‰²çš„æ€§æ ¼", "éˆé­‚ä¹Ÿè¨­è¨ˆ",
    "ç¾æ˜¯å¹³è¡¡", "æ„å¿µæˆå½¢", "ç©ºé–“æœƒèªªè©±", "è¨­è¨ˆèƒ½æ²»ç™’", "ç¾ï¼Œæ˜¯é¸æ“‡", "å‰µæ„çš„é‡é‡",
    "æ¶æ§‹å‰µé€ æ„ç¾©"
  ],
  // --- V4.9: è£œå›éºå¤±çš„ä¸»é¡Œ (çºŒ) ---
  technology: [
    // ğŸš€ã€â‘  ç§‘æŠ€æ‡‰ç”¨ Ã— æœªä¾†å‰µæ–°ç³»åˆ—ï¼ˆ40 å€‹ï¼‰ã€‘
    "å…‰é€Ÿçš„æ€ç¶­", "æœªä¾†çš„èªè¨€", "ç§‘æŠ€çš„å¿ƒè·³", "æ™ºæ…§çš„é‚Šç•Œ", "æ¼”ç®—æ³•çš„éˆé­‚",
    "äººæ©Ÿçš„å…±èˆ", "é‡å­çš„å‘¼å¸", "æœªä¾†åœ¨ç™¼å…‰", "ç ´æ¡†çš„å‰µæ–°", "åœ¨ç§‘æŠ€è£¡æ€è€ƒ",
    "äººæ€§çš„å‡ç´š", "æ™ºèƒ½çš„æ–¹å‘", "æœªä¾†çš„è¦ºé†’", "æ•¸æ“šçš„ç›´è¦º", "åŸå¸‚çš„æ„è­˜",
    "AI çš„æº«åº¦", "å‰µæ–°çš„å ´åŸŸ", "çœ‹è¦‹æ–°ä¸–ç•Œ", "æ–°æ™ºèƒ½çš„èª•ç”Ÿ", "é è¦‹çš„åŠ›é‡",
    "é€²åŒ–çš„é¸æ“‡", "é€£çµçš„æœªä¾†", "æ–°ä¸–ä»£çš„å¿ƒ", "è™›å¯¦çš„é‚Šå¢ƒ", "ç ´å±€çš„æ™ºèƒ½",
    "é‡å­ä¹‹å…‰", "è¶…è¶Šçš„è¦–ç•Œ", "æœªä¾†çš„è§£æ–¹", "æ™ºæ…§çš„å†é€ ", "æŠ€è¡“çš„å“²å­¸",
    "è³‡è¨Šçš„éˆæ€§", "æ™‚ä»£åœ¨è®Šå½¢", "ç„¡é™çš„è¨ˆç®—", "æ„è­˜åœ¨æ“´å¼µ", "å‰µæ–°çš„äººé¡",
    "æ¼”åŒ–çš„æ–°ç¯‡ç« ", "æœªä¾†æ„ŸçŸ¥", "äººå·¥çš„å¥‡è¹Ÿ", "ç§‘æŠ€çš„å–„æ„", "ç„¡ç•Œçš„å‰µæ–°"
  ],
  surreal: [
    // ğŸŒŒã€â‘¡ å¤©é©¬è¡Œç©º Ã— è¶…ç¾å¯¦å‰µæ„ç³»åˆ—ï¼ˆ40 å€‹ï¼‰ã€‘
    "å¤¢çš„é‚Šå¢ƒ", "é›²ä¸Šçš„åŸå¸‚", "å…‰çš„ç¿…è†€", "é£›åœ¨æƒ³åƒè£¡", "è¶…è¶Šç¾å¯¦çš„å¿ƒ", "æ˜Ÿæ²³åœ¨æµå‹•",
    "é‡åŠ›çš„é€†è½‰", "è©©æ„çš„å®‡å®™", "å¤©ç©ºçš„éšæ¢¯", "å¿ƒä¸­çš„å®‡å®™", "çƒé«”çš„å“²å­¸", "é¢¨ä¸­çš„å¤¢æ™¯",
    "è·¨è¶Šæ˜Ÿé–€", "éˆæ„Ÿçš„çˆ†ç‚¸", "å¤¢æœƒå‘Šè¨´ä½ ", "ç•«è£¡çš„ä¸–ç•Œ", "å¿ƒèƒ½é£›å¤šé ", "ç•°æƒ³çš„é‚è¼¯",
    "ç„¡æ¡†çš„å¤©ç©º", "é€†å…‰çš„å¥‡è¹Ÿ", "æƒ³åƒåœ¨ç”Ÿé•·", "è¶…è¶Šçš„å¿ƒè±¡", "ç ´æ¬¡å…ƒçš„é¢¨", "å¤¢çš„èˆªé“",
    "æ˜Ÿå…‰çš„æ²³è°·", "å¿ƒéˆçš„å¤ªç©º", "éˆæ„Ÿçš„æ“´æ•£", "å¤œç©ºçš„éšæ¢¯", "ç„¡é™çš„ç¿…è†€", "é­‚çš„æ—…ç¨‹",
    "å¹»å¢ƒçš„é–‹é–€", "æ™‚ç©ºçš„æŠ˜å°„", "æƒ³åƒçš„é‡åŠ›", "è©©åœ¨é›²é ‚", "æ˜Ÿä¹‹ä¸Šçš„å³¶", "éœ§ä¸­çš„å¤¢å¾‘",
    "å¿ƒè·³çš„å…‰ç·š", "éˆé­‚çš„å¤©ç©º", "é£›è¶Šå¹³è¡Œç•Œ", "å¤¢å¢ƒçš„èˆªè¡Œè€…"
  ],
  pets: [
    // ğŸ¾ ã€ŠTONY STUDIO å¯µç‰©å¯æ„›ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‹
    "å°¾å·´çš„æ•…äº‹", "çœ¼ç¥æœƒèªªè©±", "ä½ åœ¨æˆ‘å°±å®‰å¿ƒ", "æœ€æš–çš„é™ªä¼´", "å¿ƒéƒ½èåŒ–äº†",
    "é è‘—çš„å¹¸ç¦", "æ’’å¬Œçš„åŠ›é‡", "è¢«æ„›çš„ç¬é–“", "æœ€æ‡‚æˆ‘çš„ä½ ", "ç‰½ç‰ ä¸€èµ·èµ°",
    "ä»Šå¤©ä¹Ÿå¾ˆæ¯›", "èª¿çš®çš„å°å®‡å®™", "äº‚å…¥çš„å¯æ„›", "æˆ²ç²¾ä¸Šç·šäº†", "ä¸çµ¦æ‘¸ä¹Ÿå¯æ„›",
    "ä½ åˆå·åƒäº†", "é€™æ˜¯èª°çš„éŒ¯è¦º", "çœ¼ç›å¤ªçœŸå¯¦", "ç„¡æ³•æ‹’çµ•çš„è‡‰", "é€™ç¬‘å®¹çŠ¯æ³•",
    "ä½ çš„æ¯›å¾ˆæŸ”", "æ²»ç™’åŠ›æ»¿åˆ†", "æ„›è¢«æŠ±çš„éˆé­‚", "é€™è²éŸ³å¤ªèŒ", "æ¯”å¿ƒçš„æ¯›çƒ",
    "è…³æ­¥çš„æº«åº¦", "éˆé­‚çš„å°å¤ªé™½", "æ¯›èŒ¸èŒ¸çš„å¹¸ç¦", "å¤©ç”Ÿçš„ç™‚ç™’å¸«", "æº«æŸ”çš„é¼»å°–",
    "å¯æ„›ä¹Ÿæœ‰æ™ºæ…§", "å¿ƒéœä¸‹ä¾†æ›´æ„›", "æ¯›å­©çš„çœŸå¿ƒè©±", "æ´»åœ¨ç•¶ä¸‹çš„ç‰ ", "ç”Ÿå‘½çš„é™ªä¼´è€…",
    "æ„›ï¼Œæ˜¯ä¸èªçš„", "æœ€å¿ èª çš„ç›®å…‰", "å–„è‰¯çš„æœ¬èƒ½", "éˆé­‚çš„å°è€å¸«", "æ„›ä½ ä¸éœ€èªè¨€"
  ],
  performing_arts: [
    // ã€ŠTONY STUDIOâ€”æ¼”å¥ Ã— æ­Œå”± Ã— èˆè¹ˆè¡¨æ¼”ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‹
    "éˆé­‚çš„æ¨‚ç« ", "æŒ‡å°–çš„é¢¨", "æ—‹å¾‹æœƒèªªè©±", "å¿ƒä¸­çš„éŸ³ç¬¦", "è½è¦‹è‡ªå·±çš„è²éŸ³", "éŸ³æ¨‚çš„é‡é‡",
    "å…‰åœ¨ç´å¼¦ä¸Š", "éˆé­‚çš„é¼“é»", "é¢¨ä¸­çš„ç´è²", "æ—‹å¾‹çš„æº«åº¦", "æ¯”éŸ³æ›´æ·±çš„äº‹", "è²éŸ³çš„å½¢ç‹€",
    "æ¼”å¥çš„å‘¼å¸", "å’Œè²çš„å¥‡è¹Ÿ", "éŸ³ç¬¦çš„æ—…ç¨‹", "å”±å‡ºå¿ƒè£¡è©±", "éˆé­‚æœƒé–‹å£", "æ­Œè²çš„åŠ›é‡",
    "å‘¼å¸çš„çœŸèª ", "è²éŸ³çš„æ•…äº‹", "æ­Œåœ¨å¿ƒè£¡å”±", "å¿ƒè·³çš„æ—‹å¾‹", "éŸ³ç¬¦çš„çœ¼ç¥", "ç”¨è²éŸ³æ“æŠ±",
    "å¯«åœ¨è²è£¡çš„æ„›", "èº«é«”åœ¨ç™¼å…‰", "ç”¨èˆèªªæ•…äº‹", "è…³æ­¥çš„éˆé­‚", "é£›èµ·ä¾†çš„æ™‚åˆ»", "èˆå‹•çš„å¿ƒè·³",
    "ç¿»è½‰çš„ç¬é–“", "ç”¨èº«é«”å‘¼å¸", "æ—‹è½‰çš„è¦ºé†’", "èˆå‡ºè‡ªç”±", "è½å¾—è¦‹çš„èˆ", "èˆå°çš„å¿ƒ",
    "å…‰ç…§äº®äº†éˆé­‚", "è¡¨æ¼”çš„çœŸç›¸", "ç•¶è—è¡“é–‹å£", "ç«™ä¸Šèˆå°çš„å‹‡æ°£"
  ],
  street_performer: [
    // ğŸ¸ ã€Šè¡—é ­è—äººè¡¨æ¼”ç³»åˆ— Street Performer Seriesï¼ˆ20 ä¸»é¡Œï¼‰ã€‹
    "è¡—è§’çš„ç´è²", "æµæµªçš„æ—‹å¾‹", "äººè¡Œé“çš„éŸ³ç¬¦", "éˆé­‚åœ¨å½ˆå¥", "ä¸–ç•Œçš„è¡—è²", "æŒ‡å°–çš„è‡ªç”±",
    "é¢¨å¹æ¨‚ç« èµ°", "ç«™åœ¨è¡—ä¸Šçš„æ­Œ", "æ­Œåœ¨è·¯ä¸Šèµ°", "å”±çµ¦åŸå¸‚è½", "è²éŸ³çš„å‹‡æ°£", "éˆé­‚é–‹äº†å£",
    "çœŸå¿ƒçš„è¡—è²", "è¡—é ­çš„ç¯€å¥", "èº«é«”çš„è‡ªç”±åº¦", "é¢¨ä¸­çš„èˆæ­¥", "è½‰èº«çš„ç¬é–“", "åŸå¸‚çš„éˆé­‚çœ¼",
    "è¡¨æ¼”çš„è¡—å…‰", "è¡—é ­çš„çœŸå¯¦åº¦"
  ],
  // --- V4.9: è£œå›éºå¤±çš„ä¸»é¡Œ (çºŒ) ---
  advertising: [
    // ğŸ¯ ã€Šç¬¬åäºŒå¤§ç³»åˆ—ï¼šå»£å‘Šå‰µæ„ Ã— å“ç‰Œæ´å¯Ÿï¼ˆ40 ä¸»é¡Œï¼‰ã€‹
    "æ™‚é–“çš„åƒ¹å€¼", "é¸æ“‡çš„åº•æ°£", "ç¿’æ…£çš„åŠ›é‡", "ç”Ÿæ´»çš„éˆæ„Ÿ", "å…‰æœƒæ‰¾åˆ°ä½ ", "ç´°ç¯€çš„çœŸç›¸",
    "æ…¢çš„å“²å­¸", "ç”¨å¿ƒçš„é‡é‡", "é¸æ“‡æœƒèªªè©±", "å‹‡æ•¢æ˜¯ä¸€ç¨®å§¿æ…‹", "ç¾å¥½ä¸å¿…è¤‡é›œ", "éˆæ„Ÿåœ¨è·¯ä¸Š",
    "å•Ÿå‹•çš„ç¬é–“", "å…‰å½±çš„æƒ³åƒ", "ç„¡è²çš„æºé€š", "éˆé­‚çš„è§¸è¦º", "æ–¹å‘çš„å•Ÿç¤º", "æ¶æ§‹çš„éˆé­‚",
    "ç›´è¦ºçš„åˆ¤æ–·", "çœ‹è¦‹æ–°è§’åº¦", "ç„¡é™çš„å¯èƒ½æ€§", "ç ´æ¡†çš„ç­”æ¡ˆ", "è®“æƒ³åƒç™¼ç”Ÿ", "éˆæ„Ÿçš„è¦–è§’",
    "å‹‡æ–¼æˆç‚ºè‡ªå·±", "ä¸–ç•Œæœƒè¨˜å¾—ä½ ", "æ…‹åº¦å°±æ˜¯é¢¨æ ¼", "ä½ å°±æ˜¯ä¸»è§’", "ä¿¡å¿µæœƒèªªè©±", "å“ç‰Œçš„éˆé­‚",
    "é¢¨æ ¼çš„åŠ›é‡", "å½±åƒçš„èªè¨€", "è®“ä¸–ç•Œçœ‹è¦‹ä½ ", "åšè‡ªå·±çš„å…‰", "ä»¥ç†±æƒ…ç‚ºå", "èª å¯¦çš„ç¾æ„Ÿ",
    "å‰µæ„çš„çœŸå¿ƒ", "è¨­è¨ˆèƒ½æ”¹è®Šä¸–ç•Œ", "èªªæ•…äº‹çš„æ–¹å¼", "ä½ å€¼å¾—è¢«çœ‹è¦‹"
  ],
  disaster: [
    // ğŸŒªï¸ ã€Šç¬¬åä¸‰å¤§ç³»åˆ—ï¼šç½é›£ç‰‡ Ã— åŠ‡æƒ…å¼µåŠ›ï¼ˆ40 ä¸»é¡Œï¼‰ã€‹
    "é¢¨æš´çš„å‰å¥", "æµ·å˜¯çš„çœ¼ç›", "ç«å±±çš„å‘¼å¸", "åœ°éœ‡çš„è£‚ç¸«", "æš´é›¨çš„å¯©åˆ¤", "é»‘å¤œçš„å’†å“®",
    "é¢¶é¢¨çš„é‚Šç·£", "çƒˆç«çš„çœŸç›¸", "æš´é¢¨çœ¼ä¹‹å…§", "å¤©ç©ºçš„å´©å¡Œ", "ç°ç‡¼çš„è¨˜æ†¶", "ç”Ÿæ­»ä¸€ç·šé–“",
    "åœ¨é»‘æš—è£¡å‰è¡Œ", "é€†å¢ƒçš„å‹‡æ°£", "å¸Œæœ›çš„ç«è‹—", "å­¤ç¨çš„ç”Ÿé‚„è€…", "ç”Ÿçš„é¸æ“‡", "éˆé­‚çš„è©¦ç…‰",
    "ä¸æ”¾æ£„çš„ç†ç”±", "æ´»è‘—çš„æ„ç¾©", "å …å¼·çš„å½¢ç‹€", "ææ‡¼çš„ç›¡é ­", "å¤±å»çš„é‡é‡", "æŒºä½å°±æ˜¯å¸Œæœ›",
    "å®‡å®™çš„æ²ˆé»˜", "æ˜Ÿçƒçš„å±æ©Ÿ", "å¤ªç©ºçš„è£‚éš™", "é»‘æ´çš„å‘¼å–š", "æ˜Ÿç©ºçš„çµ‚å±€", "ç„¡é‡åŠ›çš„ææ‡¼",
    "å…‰å¹´çš„çµ•å¢ƒ", "æ™‚ç©ºçš„é‚Šç·£", "å®‡å®™æœƒå›ç­”", "æ˜Ÿç³»çš„ç°ç‡¼", "æœªä¾†çš„é¿é›£æ‰€", "çµ•æœ›çš„å…‰ç·š",
    "å¹³è¡Œæ™‚ç©ºçš„è£‚ç—•", "æœ€å¾Œçš„è¨Šè™Ÿ", "ç”Ÿå­˜çš„åº§æ¨™", "æ‹¯æ•‘çš„å€’æ•¸"
  ],
  retro: [
    // ğŸï¸ ã€Šç¬¬åå››å¤§ç³»åˆ—ï¼šå¾©å¤é¢¨ Ã— æ™‚ä»£ç¾å­¸ï¼ˆ40 ä¸»é¡Œï¼‰ã€‹
    "è€è¡—çš„é¢¨", "æ™‚å…‰çš„å‘³é“", "ç´…ç£šçš„è¨˜æ†¶", "ç«¥å¹´çš„å…‰", "è€ç›¸æ©Ÿçš„çœ¼", "é»‘è† çš„æ—‹å¾‹",
    "è€è»Šçš„æ•…äº‹", "çŸ³æ¿è·¯çš„è²éŸ³", "èˆŠæ™‚ä»£çš„é¦™æ°£", "å›æ†¶çš„åº•ç‰‡", "é‚£å¹´çš„å¤å¤©", "æ™‚ä»£æœƒèªªè©±",
    "è† å·çš„ç´‹ç†", "ç¶“å…¸çš„å…‰", "å¾©å¤çš„éˆé­‚", "è€é›»å½±çš„ç¯€å¥", "æ–‡é’çš„æµªæ¼«", "é›ªèŒ„çš„é¦™å‘³",
    "çš®é©çš„è³ªæ„Ÿ", "æ‘©ç™»çš„å‰ªå½±", "éœ“è™¹çš„å›éŸ³", "50 å¹´ä»£çš„å¤œ", "å’–å•¡çš„å¹´ä»£", "æ—‹è½‰çš„é»‘è† ",
    "æ­æ´²çš„å¤æ„", "åŸå ¡çš„å›è²", "å¤å…¸çš„å‘¼å¸", "å¯«æ„çš„æ™‚å…‰", "è€æ›¸çš„è§¸æ„Ÿ", "å¤è€çš„æ—‹å¾‹",
    "å¤è‘£çš„éˆé­‚", "å¢¨æ°´çš„æ°£å‘³", "æ™‚ä»£çš„è—è¡“æ„Ÿ", "æ–‘é§çš„ç¾", "è€çª—çš„å…‰", "èˆŠæ™‚å…‰çš„å½±å­",
    "å¤å…¸çš„é¢¨åº¦", "æ™‚ä»£çš„æ­¥ä¼", "å¾©å¤çš„é­…åŠ›", "æ™‚å…‰ä¸æœƒè€"
  ],
  world_landscape: [
    // ğŸŒã€â‘  ä¸–ç•Œçš„é¢¨æ™¯ Ã— æ™¯è§€ Ã— ç¿’ä¿—ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "å±±è„ˆçš„å‘¼å–š", "æµ·å²¸çš„ç¯€å¥", "æ²™æ¼ çš„å‘¢å–ƒ", "é›ªåœ‹çš„å¯§éœ", "æ£®æ—çš„è„ˆæ", "ç«å±±çš„è¨˜æ†¶",
    "å³½è°·çš„è¿´è²", "ç€‘å¸ƒçš„èªè¨€", "è‰åŸçš„å¿ƒè·³", "æ¹–é¢çš„ç¥•å¯†", "å¤©ç©ºçš„éšæ¢¯", "å³¶å¶¼çš„éˆå…‰",
    "å·´é»çš„æµªæ¼«", "äº¬éƒ½çš„éœåº¦", "ç´ç´„çš„ç¯€å¥", "å€«æ•¦çš„éœ§", "ç¾…é¦¬çš„æ™‚é–“", "å·´å¡éš†ç´çš„è‰²å½©",
    "äº¬éƒ½çš„å··å¼„é¢¨", "æ›¼è°·çš„ç”Ÿå‘½åŠ›", "é¦–çˆ¾çš„å¤œå…‰", "æŸæ—çš„æ…‹åº¦", "ç¾©å¤§åˆ©çš„é‡Œå··", "é‡Œç´„çš„å¿ƒè·³",
    "å¨å°¼æ–¯çš„å€’å½±", "æ—¥æœ¬çš„ç¥­", "å°åº¦çš„è‰²å½©", "æ³°åœ‹çš„æ½‘æ°´", "å¤å¨å¤·çš„èŠ±ç’°", "è¥¿è—çš„è½‰ç¶“",
    "å°å°¼çš„ç¥ˆç¦", "éæ´²çš„é¼“èˆ", "ç§˜é­¯çš„å¤é“", "å¸Œè‡˜çš„è—ç™½", "ä¸­æ±çš„é¦™æ°£", "æ‘©æ´›å“¥çš„åœ–é¨°",
    "æ¾³æ´²çš„åŸæ°‘é¢¨", "å†°å³¶çš„æ¥µå…‰", "åŒ—æ­çš„å†¬æ—¥", "ä¸–ç•Œçš„å¿ƒè„ˆ"
  ],
  solar_terms: [
    // ğŸ‚ã€â‘¡ ä¸­åœ‹ 24 ç¯€æ°£ Ã— æ™‚ä»¤å“²å­¸ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "ç«‹æ˜¥ æ˜¥é¢¨çš„é–‹å§‹", "é›¨æ°´ é›¨é†’å¤§åœ°", "é©šèŸ„ é›·å‹•çš„æ™‚åˆ»", "æ˜¥åˆ† å…‰çš„å¹³è¡¡", "æ¸…æ˜ é¢¨è£¡çš„æ€å¿µ",
    "ç©€é›¨ æ½¤ç‰©ç„¡è²", "ç«‹å¤ å…‰çš„è„ˆå‹•", "å°æ»¿ åœ“æ»¿çš„å‰å¥", "èŠ’ç¨® æ’­ç¨®çš„å‹‡æ°£", "å¤è‡³ æ—¥é•·çš„ç­”æ¡ˆ",
    "å°æš‘ ç››å¤çš„å‘¼å¸", "å¤§æš‘ ç†±ä¸­çš„æˆé•·", "ç«‹ç§‹ é¢¨çš„è½‰æŠ˜", "è™•æš‘ ç†±é€€çš„ç¯€å¥", "ç™½éœ² æ¸…æ™¨çš„çœŸèª ",
    "ç§‹åˆ† ç§‹çš„å¹³è¡¡", "å¯’éœ² éœœå‰çš„å¯§éœ", "éœœé™ å¯’æ„çš„é å‘Š", "ç«‹å†¬ å†¬çš„åºç« ", "å°é›ª ç™½çš„è¼•èª",
    "å¤§é›ª é›ªçš„é‡é‡", "å†¬è‡³ å¤œæœ€æ·±è™•çš„å…‰", "å°å¯’ å†·è£¡çš„å …éŸŒ", "å¤§å¯’ è¬ç‰©çš„æ²‰é»˜",
    "å››æ™‚çš„å¿ƒæ³•", "è‡ªç„¶çš„è¦å¾‹", "é †å‹¢è€Œç‚º", "æ™‚ä»¤çš„æ™ºæ…§", "é‹è¡Œçš„ç­”æ¡ˆ", "å­£ç¯€çš„èªè¨€",
    "è¬ç‰©çš„ç¯€å¥", "æ˜¥ç”Ÿçš„åŠ›é‡", "å¤ç››çš„èƒ½é‡", "ç§‹æ”¶çš„æ„è­˜", "å†¬è—çš„æ·±åº¦", "å¯’ä¾†æš‘å¾€",
    "å¤©åœ°çš„å‘¼å¸", "é™°é™½çš„æµå‹•", "æ™‚å…‰çš„ç¦®ç‰©", "å››å­£æ•™æˆ‘å€‘çš„äº‹"
  ],
  // --- V4.9: è£œå›éºå¤±çš„ä¸»é¡Œ (çºŒ) ---
  dialogue_celebrity: [
    // ğŸŒã€â‘  èˆ‡ä¸–ç•Œåäººå°è©±ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "èˆ‡è€å­å°è©±", "èˆ‡å­”å­åŒè¡Œ", "èˆ‡æŸæ‹‰åœ–è«‡å¿ƒ", "èˆ‡è˜‡æ ¼æ‹‰åº•æå•", "èˆ‡äºé‡Œæ–¯å¤šå¾·æ€è¾¨", "èˆ‡å°¼é‡‡æœ›å‘æ·±æ·µ",
    "èˆ‡å¡ç¹†èŠè’è¬¬", "èˆ‡ç´€ä¼¯å€«è«‡å¿ƒéˆ", "èˆ‡ä½›é™€å­¸æ™ºæ…§", "èˆ‡èŠå­çœ‹ä¸–ç•Œ", "èˆ‡èå£«æ¯”äºå°ç™½", "èˆ‡æ³°æˆˆçˆ¾æ•£æ­¥",
    "èˆ‡æ„›å› æ–¯å¦æ€è€ƒ", "èˆ‡éœé‡‘çœ‹å®‡å®™", "èˆ‡é”çˆ¾æ–‡è«‡é€²åŒ–", "èˆ‡ç‰¹æ–¯æ‹‰èŠæœªä¾†", "èˆ‡å±…é‡Œå¤«äººæ±‚çœŸ", "èˆ‡è³ˆä¼¯æ–¯è«‡å‰µæ–°",
    "èˆ‡é¦¬æ–¯å…‹è«–ç ´æ¡†", "èˆ‡åœ–éˆæƒ³åƒæ™ºèƒ½", "èˆ‡æ¢µè°·çœ‹æ˜Ÿç©º", "èˆ‡è«æœ­ç‰¹è½éˆé­‚", "èˆ‡è²å¤šèŠ¬è½å‘½é‹",
    "èˆ‡æŸ´å¯å¤«æ–¯åŸºå…±èˆ", "èˆ‡ç•¢å¡ç´¢æ‹†æ¡†", "èˆ‡é”æ–‡è¥¿ç™¼ç¾ç¾", "èˆ‡æµ·æ˜å¨å°é£²", "èˆ‡é¦¬è’‚æ–¯å°‹å…‰",
    "èˆ‡ç±³é–‹æœ—åŸºç¾…ä»°æœ›", "èˆ‡æ­Œå¾·è«‡ç”Ÿå‘½", "èˆ‡æ›¼å¾·æ‹‰å­¸å‹‡æ°£", "èˆ‡ç”˜åœ°è«‡éæš´åŠ›", "èˆ‡é¦¬ä¸è·¯å¾·é‡‘é€å¤¢",
    "èˆ‡æ—è‚¯è«‡å …æŒ", "èˆ‡é‚±å‰çˆ¾è«–æ±ºå¿ƒ", "èˆ‡ç‰¹è•¾èä¿®å¥³è«‡æ„›", "èˆ‡é”è³´å–‡å˜›å¾®ç¬‘", "èˆ‡è–é›„å­”å­åŒè¡Œ",
    "èˆ‡è˜‡è²äºå¥³ç‹å°è«‡", "èˆ‡ä¸–ç•ŒèªªçœŸå¿ƒè©±"
  ],
  dialogue_classics: [
    // ğŸ“šã€â‘¡ ä¸–ç•Œåè‘— Ã— ç«¥è©± Ã— è«ºèªç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "å°ç‹å­çš„æ˜Ÿçƒ", "è€äººèˆ‡æµ·çš„åŠ›é‡", "ç¾…å¯†æ­çš„æœˆå…‰", "å”å‰è¨¶å¾·çš„é¢¨è»Š", "å‚²æ…¢èˆ‡åè¦‹çš„å°ç™½", "ç™¾å¹´å­¤å¯‚çš„é­”å¹»",
    "æµ·é‚Šå¡å¤«å¡çš„å­¤ç¨", "è¿½é¢¨ç®çš„å­©å­", "ç•¶ä¸‹çš„åŠ›é‡", "éº¥ç”°æ•æ‰‹çš„å›é€†", "æµ®å£«å¾·çš„äº¤æ›", "æ‚²æ…˜ä¸–ç•Œçš„å…‰",
    "ç“¦çˆ¾ç™»æ¹–çš„éœ", "æˆ°çˆ­èˆ‡å’Œå¹³çš„å¿ƒ", "ç°å§‘å¨˜çš„çœŸç›¸", "å°ç´…å¸½çš„å‹‡æ°£", "é†œå°é´¨çš„æˆé•·", "ç™½é›ªå…¬ä¸»çš„é¸æ“‡",
    "å°æœ¨å¶çš„èª å¯¦", "å°ç¾äººçš„è·é›¢", "é•·é«®å…¬ä¸»çš„è‡ªç”±", "ä¸‰éš»å°è±¬çš„æ™ºæ…§", "å½¼å¾—æ½˜çš„é£›ç¿”", "é˜¿æ‹‰ä¸çš„é¡˜æœ›",
    "é’è›™ç‹å­çš„ç§˜å¯†", "æ„›éº—çµ²çš„æ´å£", "ç«¥è©±æ•™æˆ‘çš„äº‹", "é¢¨æœƒå›ç­”ä½ ", "è·¯æ˜¯èµ°å‡ºä¾†çš„", "å±±å†é«˜ä¹Ÿèƒ½åˆ°",
    "ç¿’æ…£æ±ºå®šå‘½é‹", "ç¨®ä»€éº¼æ”¶ä»€éº¼", "æ™‚é–“æœƒèªªçœŸè©±", "å…‰ç¸½åœ¨å‰æ–¹", "å¿ƒéœè‡ªç„¶æ¶¼", "æœ‰å¤±æ‰æœ‰å¾—",
    "èˆ‡é¢¨åŒè¡Œ", "ç”Ÿæ´»æ˜¯ä¸€é¢é¡å­", "ä¸–ç•Œå› ä½ è€Œè®Š", "ç¡å‰çš„æ™ºæ…§"
  ],
  // --- V4.9: è£œå›éºå¤±çš„ä¸»é¡Œ (çºŒ) ---
  industry: [
    // ğŸŒ±ã€â‘  ç™¾å·¥ç™¾æ¥­ Ã— ç”Ÿæ…‹æ™ºæ…§ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "æœ¨åŒ çš„ç¯€å¥", "æ¼å¤«çš„æ™‚åº", "è¾²äººçš„è€å¿ƒ", "éµåŒ çš„ç«å…‰", "è£ç¸«çš„éˆæ‰‹", "éºµåŒ…å¸«çš„æ™¨å…‰",
    "èŒ¶å¸«çš„ç¯€æ°£æ„Ÿ", "èŠ±åŒ çš„éˆé­‚", "é™¶åŒ çš„æº«åº¦", "è£ç¸«çš„é‡ç·šå¿ƒ", "çŸ³åŒ çš„ç´‹ç†", "ä¿®ç¹•çš„å“²å­¸",
    "å·¥ç¨‹çš„é‚è¼¯", "å»ºç¯‰çš„è¦–é‡", "è¨­è¨ˆçš„éª¨æ¶", "é†«è€…çš„å–„æ„", "ç‰©æµçš„è„ˆå‹•", "ç§‘æŠ€çš„æ¼”ç®—",
    "é¤é£²çš„ç«å€™", "å•†äººçš„çœ¼å…‰", "è¡ŒéŠ·çš„æ„Ÿå—åŠ›", "ä¼åŠƒçš„æ¡†æ¶", "ç ”ç™¼çš„å¥½å¥‡å¿ƒ", "ç®¡ç†çš„ç¯€å¥",
    "æœå‹™çš„æº«åº¦", "æ•™è‚²çš„ç¨®å­", "æ¸…æ½”çš„å…‰äº®", "å…¬è»Šçš„æ—¥å¸¸", "é†«è­·çš„å‘¼å¸", "ä¿å…¨çš„å®ˆè­·",
    "æ—…å®¿çš„å¿ƒæ„", "é¤æ¡Œçš„æ•…äº‹", "ç¤¾å·¥çš„å–„æ„", "éŠ€è¡Œçš„ä¿¡ä»»", "æ›¸åº—çš„éˆé­‚", "æ¯ä¸€è¡Œéƒ½æœ‰å…‰",
    "è¡Œæ¥­çš„ç”Ÿå‘½åŠ›", "å‹å‹•çš„æ™ºæ…§", "ç”Ÿæ…‹ä¸­çš„äºº", "ç™¾æ¥­çš„å‘¼å¸"
  ],
  festivals: [
    // ğŸ‰ã€â‘¡ ä¸–ç•Œç¯€æ—¥ Ã— å„€å¼æ–‡åŒ–ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "æ˜¥ç¯€çš„åœ˜åœ“", "ä¸­ç§‹çš„æœˆå…‰", "æ³¼æ°´çš„ç¥ç¦", "èŠ±ç«çš„å¤œç©º", "æ—¥æœ¬çš„ç›‚è˜­ç›†", "æ³°åœ‹çš„å¤©ç‡ˆ",
    "éŸ“åœ‹çš„ç§‹å¤•", "è¶Šå—çš„æ˜¥ç¯€", "å°¼æ³Šçˆ¾çš„ç‡ˆç¯€", "å°åº¦çš„è‰²å½©ç¯€", "å°ç£çš„ç‡ˆæµ·", "åŸæ°‘çš„è¿éˆ",
    "è–èª•çš„å¸Œæœ›", "å¨å°¼æ–¯çš„é¢å…·", "æ…•å°¼é»‘å•¤é…’ç¯€", "æ³•åœ‹çš„å…‰å½±ç¯€", "è‹±åœ‹çš„ç…™ç«å¤œ", "ç‘å…¸ä»²å¤å¤œ",
    "è¥¿ç­ç‰™ç•ªèŒ„ç¯€", "å¸Œè‡˜çš„å¾©æ´»ç¯€", "å¾·åœ‹çš„è–å¸‚é›†", "åŒ—æ­çš„ç™½å¤œ", "å·´è¥¿å˜‰å¹´è¯", "å¢¨è¥¿å“¥äº¡éˆç¯€",
    "ç§˜é­¯å¤ªé™½ç¥­", "å¤å¨å¤·è‰è£™èˆ", "åŠ æ‹¿å¤§æ¥“è‘‰å­£", "ç¾åœ‹ç¨ç«‹æ—¥", "é˜¿æ ¹å»·æ¢æˆˆå¤œ", "éæ´²é¼“èˆç¥­",
    "æ¾³æ´²å¢æ—ç¯€", "ç´è¥¿è˜­æ¯›åˆ©æ­Œ", "åŠ å‹’æ¯”æµ·çš„èˆ", "æ‹‰ä¸ç«ç„°å¤œ", "æ­²æœ«çš„æ„Ÿè¬", "é»äº®ä¸€ç›å…‰",
    "å„€å¼çš„åŠ›é‡", "ç¯€æ…¶çš„å¿ƒæ„", "äººç¾¤çš„æº«åº¦", "ä¸–ç•Œå…±äº«çš„å¤œ"
  ],
  // V4.L3: æ–°å¢ TONY è€å¸« å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ—ä¸»é¡Œ
  youthful_joy: [
    // ğŸš€ã€â‘  å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "å¿«æ¨‚æ˜¯ç¨®é¸æ“‡", "å¾®ç¬‘çš„åŠ›é‡", "å‰µæ„ç„¡æ¥µé™", "é’æ˜¥æ­£ç™¼å…‰", "æ˜å¤©æœƒæ›´å¥½",
    "ä¸€èµ·è·³èºå§", "å¤¢æƒ³çš„é¡è‰²", "å¿ƒçš„ç¯€å¥", "æ´»åœ¨ç•¶ä¸‹", "åˆ†äº«çš„å¿«æ¨‚",
    "å¥½å¥‡å¿ƒè¬æ­²", "è¡å§ï¼åˆ¥æ€•", "æ”¾è†½å»ç©", "éˆæ„Ÿå¤§çˆ†ç™¼", "ä¸ä¸€youngçš„è¦–è§’",
    "è·Ÿä¸Šå¥½å¿ƒæƒ…", "æ­£èƒ½é‡æ»¿é»", "ç‚ºè‡ªå·±å–é‡‡", "é’æ˜¥ç„¡ç•", "é»äº®æ–°å¯èƒ½",
    "æœªä¾†çš„å½¢ç‹€", "å¿«æ¨‚çš„é »ç‡", "Be Your Own Sparkle", "æ•¢å¤¢å°±æ•¢Go", "ç¬‘è²æ˜¯æœ€å¥½çš„éŸ³æ¨‚",
    "å‰µæ„æœƒå‚³æŸ“", "ç‚ºç”Ÿæ´»ä¸Šè‰²", "å¥½ç©å°±å°äº†", "æ”¾é¬†ä¸€ä¸‹", "æ–°çš„ä¸€å¤©",
    "ç”©æ‰åŒ…è¢±", "High èµ·ä¾†", "è®“éˆæ„Ÿé£›", "é€™å°±æ˜¯æˆ‘", "æˆ‘çš„æœªä¾†æˆ‘åšä¸»",
    "å¿«æ¨‚å¾ˆç°¡å–®", "ç”¨å‰µæ„ç¿»è½‰ä¸–ç•Œ", "Brave & Fun", "Just Do It Now", "æœªä¾†æ­£é–ƒè€€"
  ],
  // V4.15: æ–°å¢ TONY è€å¸« é£²é£Ÿæ–‡åŒ– Ã— å»šè—å“²å­¸ç³»åˆ—ä¸»é¡Œ
  culinary_arts: [
    // ğŸ½ï¸ã€â‘  é£²é£Ÿæ–‡åŒ– Ã— å»šè—å“²å­¸ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "å»šå¸«çš„åˆ€å·¥", "é£Ÿæçš„èªè¨€", "ç«å€™çš„æ™ºæ…§", "é†¬æ–™çš„éˆé­‚", "é¤æ¡Œçš„é¢¨æ™¯",
    "ä¸€é“èœçš„æ•…äº‹", "åª½åª½çš„å‘³é“", "é£Ÿç‰©çš„è¨˜æ†¶", "å“åšç•¶ä¸‹", "åˆ†äº«çš„ç¾å‘³",
    "é¢¨åœŸçš„æ»‹å‘³", "é£²é£Ÿçš„ç¦®å„€", "æ…¢é£Ÿçš„å“²å­¸", "å¥åº·çš„é¸æ“‡", "è‰²å½©çš„é¥—å®´",
    "é¦™æ°£çš„æ—…ç¨‹", "æ“ºç›¤çš„è—è¡“", "å‘³è•¾çš„è¦ºé†’", "å»šæˆ¿çš„äº¤éŸ¿æ¨‚", "ç”¨å¿ƒæ¬¾å¾…",
    "æ·±å¤œé£Ÿå ‚çš„æº«æš–", "è¡—é ­çš„ç¾å‘³", "å‚³æ‰¿çš„æ‰‹è—", "å‰µæ–°çš„å‘³è¦º", "é£Ÿç‰©çš„ç™‚ç™’",
    "çƒ˜ç„™çš„è€å¿ƒ", "ç™¼é…µçš„å¥‡è¹Ÿ", "ç”œé»çš„å¹¸ç¦", "å’–å•¡çš„å„€å¼", "èŒ¶çš„éœå¿ƒ",
    "é…’çš„å¾®é†º", "ç±³å…¶æ—çš„ç²¾ç¥", "ä¸»å»šçš„å …æŒ", "é£Ÿç‰©çš„æ—…è¡Œ", "ä¸–ç•Œçš„é¤æ¡Œ",
    "æ–™ç†çš„å¿ƒæ„", "å‘³é“çš„å¹³è¡¡", "é£²é£Ÿçš„å››å­£", "èˆ‡é£Ÿæå°è©±", "ç¾å‘³çš„åˆå¿ƒ"
  ],
  // V4.16: æ–°å¢ TONY è€å¸« å°ç£å¯¶å³¶ Ã— åœ°æ–¹å‰µç”Ÿç³»åˆ—ä¸»é¡Œ
  taiwan_local: [
    // ğŸ‡¹ğŸ‡¼ã€â‘  å°ç£å¯¶å³¶ Ã— åœ°æ–¹å‰µç”Ÿç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "å¯¶å³¶çš„å¿ƒè·³", "å±±çš„ç¦®ç‰©", "æµ·çš„æ©è³œ", "åœŸåœ°çš„è²éŸ³", "äººæƒ…å‘³çš„æº«åº¦",
    "å–„è‰¯çš„DNA", "å‹¤å¥®çš„æ±—æ°´", "å°ç£çš„éŸŒæ€§", "ä¸€é„‰ä¸€å‘³", "å··å¼„çš„é¢¨æ™¯",
    "ç”¢åœ°çš„å‘¼å–š", "åœŸåœ°çš„æœå¯¦", "æ¼æ¸¯çš„æ—¥å‡º", "ç‰§å ´çš„æ—¥å¸¸", "é¤æ¡Œçš„æ—…è¡Œ",
    "åª½åª½çš„ç§æˆ¿èœ", "åŒ äººçš„ç²¾ç¥", "å®ˆè­·çš„æ‰‹", "ä¸–ä»£çš„å‚³æ‰¿", "æ…¢å·¥å‡ºç´°æ´»",
    "åœ¨åœ°çš„é©•å‚²", "è¶Šåœ¨åœ°è¶Šåœ‹éš›", "å°é®çš„éˆé­‚", "è¾¦æ¡Œçš„æ­¡æ¨‚", "å¸‚å ´çš„äººæƒ…",
    "è€åº—çš„å …æŒ", "æ‰‹ä½œçš„æº«åº¦", "è±æ”¶çš„å–œæ‚…", "åœŸåœ°æœƒèªªè©±", "èˆ‡è‡ªç„¶å…±ç”Ÿ",
    "å°‹æ ¹çš„æ—…ç¨‹", "å‰µæ–°çš„è¾²æ¥­", "é’å¹´è¿”é„‰", "é£²é£Ÿçš„è¨˜æ†¶", "å°ç£å¥½æ»‹å‘³",
    "ä¾†è‡ªå±±æµ·çš„ä¿¡", "ç”¨å¿ƒåšå¥½ä¸€ä»¶äº‹", "ç°¡å–®çš„å¹¸ç¦", "æ°¸çºŒçš„é¤æ¡Œ", "é€™å°±æ˜¯å°ç£"
  ],
  // V4.17: æ–°å¢ TONY è€å¸« è¬ç‰©æœ‰éˆ Ã— å¥‡å¹»å°è©±ç³»åˆ—ä¸»é¡Œ
  animal_dialogue: [
    // ğŸ¦“ã€â‘  è¬ç‰©æœ‰éˆ Ã— å¥‡å¹»å°è©±ç³»åˆ—ï¼ˆ40 ä¸»é¡Œï¼‰ã€‘
    "è¬ç‰©çš„è²éŸ³", "è€é·¹çš„è¦–è§’", "é¯¨é­šçš„ä½èª", "ç…å­çš„å‹‡æ°£", "èˆ‡çŒ›è™å…±é£²",
    "è½æ‡‚æ£®æ—", "é­šç¾¤çš„ç§©åº", "è±¹çš„ä¿¡ä»»", "å€™é³¥çš„ç´„å®š", "å¤§è±¡çš„è¨˜æ†¶",
    "çŠç‘šæµ·çš„è‰²å½©", "ç‹¼çš„å­¤ç¨", "ç†Šçš„å®ˆè­·", "ç¾šç¾Šçš„è·³èº", "æ·±æµ·çš„ç§˜å¯†",
    "é£›ç¿”çš„å“²å­¸", "å…‡çŒ›çš„æº«æŸ”", "è´è¶çš„è›»è®Š", "èœ‚é³¥çš„å°ˆæ³¨", "è²“çš„å“²å­¸",
    "ç‹—çš„å¿ èª ", "éˆé­‚çš„å°è¦–", "å¥‡å¦™çš„æœ‹å‹", "è¬ç‰©çš†æœ‰éˆ", "åœ¨é¯¨èƒŒä¸Šæ—…è¡Œ",
    "èˆ‡æµ·è±šå…±èˆ", "ç‹ç‹¸çš„æ™ºæ…§", "è›‡çš„æ²‰éœ", "çƒé¾œçš„è€å¿ƒ", "è¢ç«èŸ²çš„å…‰",
    "ç„¡è²çš„äº¤æµ", "å¿ƒçš„é€£çµ", "è·¨ç‰©ç¨®çš„èª¼", "è’é‡çš„å‘¼å–š", "ç‰ æ•™æˆ‘çš„äº‹",
    "å°Šé‡ç”Ÿå‘½", "å…±ç”Ÿçš„æ™ºæ…§", "è¬ç‰©å¹³ç­‰çš„æ™‚åˆ»", "è½æ‡‚è‡ªç„¶", "å¥‡å¹»çš„ç›¸é‡"
  ]
};


// --- æ‡‰ç”¨ç¨‹å¼ä¸»çµ„ä»¶ ---
export default function App() {
  const [selectedPillar, setSelectedPillar] = useState(TONY_STUDIO_PILLARS[0].id);
  
  // V3.0: æ–°å¢ state
  const [availableThemes, setAvailableThemes] = useState([]);
  const [selectedTheme, setSelectedTheme] = useState(''); // ç”¨æ–¼æ§åˆ¶æ–°çš„ä¸‹æ‹‰é¸å–®
  
  const [themeInput, setThemeInput] = useState(''); // ä¿æŒä¸è®Šï¼Œç”¨æ–¼æœ€çµ‚çš„ AI è¼¸å…¥
  const [secondCharacter, setSecondCharacter] = useState('');
  const [settingInput, setSettingInput] = useState('');
  
  // V4.0: è¼¸å‡ºæ”¹ç‚º JSON ç‰©ä»¶
  const [generatedScript, setGeneratedScript] = useState(null); 
  
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  
  // V4.0: æ–°å¢ AI æ™ºæ…§å»ºè­°çš„ loading ç‹€æ…‹
  const [isSuggesting, setIsSuggesting] = useState(false);
  const [suggestionError, setSuggestionError] = useState(null);
  
  // ç”¨æ–¼é¡¯ç¤º "å·²è¤‡è£½" æç¤º
  const [copied, setCopied] = useState(false); // è‹±æ–‡ SORA è…³æœ¬
  const [quotesCopied, setQuotesCopied] = useState(false); // V4.1: æ–°å¢é‡‘å¥è¤‡è£½ç‹€æ…‹
  const [zhPromptCopied, setZhPromptCopied] = useState(false); // V4.11: æ–°å¢ä¸­æ–‡ SORA è…³æœ¬è¤‡è£½ç‹€æ…‹

  // ç•¶ App å•Ÿå‹•æ™‚ï¼Œé¡¯ç¤ºä¸€å€‹æ­¡è¿ç”¨çš„ç¯„ä¾‹è…³æœ¬
  useEffect(() => {
    setGeneratedScript(getWelcomeScript());
    // V3.0: å•Ÿå‹•æ™‚ä¹Ÿè¼‰å…¥ç¬¬ä¸€å€‹ pillar çš„ä¸»é¡Œ
    setAvailableThemes(THEME_VARIABLES[TONY_STUDIO_PILLARS[0].id] || []);
  }, []);

  // V3.0: æ–°å¢ effectï¼Œç•¶ selectedPillar æ”¹è®Šæ™‚ï¼Œæ›´æ–° availableThemes
  useEffect(() => {
    const themes = THEME_VARIABLES[selectedPillar] || [];
    setAvailableThemes(themes);
    setSelectedTheme(''); // é‡è¨­ä¸»é¡Œé¸å–®
    setThemeInput(''); // é‡è¨­ä¸»é¡Œè¼¸å…¥æ¡†
    setSecondCharacter(''); // V4.0: é€£å‹•æ¸…ç©º
    setSettingInput(''); // V4.0: é€£å‹•æ¸…ç©º
  }, [selectedPillar]);

  /**
   * è™•ç† API å‘¼å«çš„é‡è©¦é‚è¼¯
   */
  async function fetchWithRetry(apiUrl, payload, retries = 3, delay = 1000) {
    for (let i = 0; i < retries; i++) {
      try {
        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });
        if (response.ok) return response.json();
      } catch (e) {
        if (i === retries - 1) throw e;
      }
      await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
    }
    throw new Error('API request failed after multiple retries.');
  }
  
  /**
   * V4.0: æ–°å¢ - å‘¼å« AI æ™ºæ…§å»ºè­°ã€Œç¬¬äºŒè§’è‰²ã€å’Œã€Œå ´æ™¯ã€
   * V4.10: å‡ç´š - å‚³é€ã€Œæ•˜äº‹æ”¯æŸ±ã€çµ¦ AI ä»¥å–å¾—æ›´ç²¾æº–çš„å»ºè­°
   */
  const fetchSuggestions = async (currentTheme) => {
    if (!currentTheme) return;

    setIsSuggesting(true);
    setSuggestionError(null);
    setSecondCharacter(''); // å…ˆæ¸…ç©º
    setSettingInput(''); // å…ˆæ¸…ç©º

    const apiKey = "";
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
    
    // V4.10: ç²å–ç•¶å‰çš„æ•˜äº‹æ”¯æŸ±åç¨±ï¼Œæä¾›æ›´è±å¯Œçš„ä¸Šä¸‹æ–‡
    const pillarName = TONY_STUDIO_PILLARS.find(p => p.id === selectedPillar)?.name || 'æœªçŸ¥ç³»åˆ—';

    // V4.14: æ›´æ–°ç³»çµ±æŒ‡ä»¤ï¼Œä»¥é©æ‡‰ä¸åŒé¢¨æ ¼çš„ç³»åˆ—ï¼Œä¸¦ç¢ºç«‹ TONY è€å¸«ç‚ºä¸»è§’
    const systemInstruction = {
      parts: [{ text: `
        æ‚¨æ˜¯ä¸€ä½é ‚å°–çš„å‰µæ„å°æ¼”ã€‚
        æ‚¨çš„ä»»å‹™æ˜¯æ ¹æ“š TONY è€å¸«æä¾›çš„ã€Œæ•˜äº‹ç³»åˆ—ã€å’Œã€Œä¸»é¡Œã€ï¼Œã€Œæ™ºæ…§å»ºè­°ã€ä¸€å€‹ã€Œç¬¬äºŒè§’è‰²ã€å’Œä¸€å€‹ã€Œå ´æ™¯ã€ã€‚
        TONY è€å¸«å°‡æ˜¯å½±ç‰‡çš„ä¸»è§’ (ä¸€ä½æ™ºæ…§çš„ç¾ä»£å°å¸«)ï¼Œæ‚¨å»ºè­°çš„ã€Œç¬¬äºŒè§’è‰²ã€æ˜¯ TONY è€å¸«çš„äº’å‹•å°è±¡ã€‚
        
        ã€æ¥µé‡è¦è¦å‰‡ã€‘
        1.  **é¢¨æ ¼ç²¾æº–**: æ‚¨çš„å»ºè­°å¿…é ˆã€Œç²¾æº–å°æ‡‰ã€æä¾›çš„ã€Œæ•˜äº‹ç³»åˆ—ã€é¢¨æ ¼ã€‚
            * **TONY STUDIO ç¶“å…¸é¢¨æ ¼** (å¦‚: é“Ã—æ™º, è‡ªç„¶...): å»ºè­°æ‡‰ å“²å­¸ã€æ·±åˆ»ã€æº«æš– (ä¾‹å¦‚: è§’è‰²=ä¸€ä½è€åƒ§, å ´æ™¯=æ¸…æ™¨çš„å¤å¯º)ã€‚
            * **TONY STUDIO å¿«æ¨‚é¢¨æ ¼** (å¦‚: ğŸš€ å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ—): å»ºè­°æ‡‰ æ´»æ½‘ã€å¹´è¼•ã€æœ‰å‰µæ„ (ä¾‹å¦‚: è§’è‰²=ä¸€ä½è¡—é ­å¡—é´‰è—è¡“å®¶, å ´æ™¯=å……æ»¿æœªä¾†æ„Ÿçš„æ•¸ä½è—è¡“å·¥ä½œå®¤)ã€‚
        
        2.  **é«˜åº¦å‰µæ„**: æ‚¨çš„å»ºè­°å¿…é ˆéå¸¸æœ‰å‰µæ„ä¸”å…·é«”ã€‚
        3.  **é¿å…é‡è¤‡**: **çµ•å°ä¸è¦** é‡è¤‡ä½¿ç”¨ç›¸åŒçš„ã€Œè§’è‰²ã€æˆ–ã€Œå ´æ™¯ã€ã€‚
        4.  **ç²¾æº–å°æ‡‰ä¸»é¡Œ**: æ‚¨çš„å»ºè­°å¿…é ˆã€Œç²¾æº–å°æ‡‰ã€æä¾›çš„ã€Œä¸»é¡Œã€ã€‚
        
        ä¾‹å¦‚ï¼š
        - (ç¶“å…¸é¢¨æ ¼) ä¸»é¡Œ:ã€Œå¿ƒå®šï¼Œè·¯å°±ä¸äº‚ã€ -> è§’è‰²:ã€Œä¸€ä½æ­£åœ¨ä¿®å‰ªç›†æ ½çš„åœ’è—å¤§å¸«ã€, å ´æ™¯:ã€Œå¯§éœçš„æ—¥å¼ç¦ªæ„èŠ±åœ’ã€
        - (å¿«æ¨‚é¢¨æ ¼) ä¸»é¡Œ:ã€Œå‰µæ„ç„¡æ¥µé™ã€ -> è§’è‰²:ã€Œä¸€ç¾¤æ­£åœ¨ç”¨ VR å”ä½œçš„å¹´è¼•è¨­è¨ˆå¸«ã€, å ´æ™¯:ã€Œè‰²å½©ç¹½ç´›çš„å…±äº«å‰µæ„ç©ºé–“ã€
        
        æ‚¨çš„å›è¦†å¿…é ˆæ˜¯ JSON æ ¼å¼ã€‚
      `}]
    };

    const responseSchema = {
      type: "OBJECT",
      properties: {
        "character": { "type": "STRING", "description": "å»ºè­°çš„ç¬¬äºŒè§’è‰² (ä¾‹å¦‚: ä¸€ä½å¹´é‚çš„ç‡ˆå¡”çœ‹å®ˆäºº, ä¸€é ­è¿·é€”çš„å¹¼é¹¿, èŠå­)" },
        "setting": { "type": "STRING", "description": "å»ºè­°çš„å ´æ™¯ (ä¾‹å¦‚: æš´é¢¨é›¨å‰çš„å¯§éœç‡ˆå¡”, ä½ˆæ»¿æ™¨éœ§çš„å¤è€æ£®æ—, é»ƒæ˜çš„ç«¹æ—)" }
      },
      "required": ["character", "setting"]
    };

    const payload = {
      contents: [{
        parts: [{ text: `
          è«‹ç‚ºé€™å€‹ä¸»é¡Œæä¾›æ™ºæ…§å»ºè­°ï¼š
          - æ•˜äº‹ç³»åˆ—: "${pillarName}"
          - ä¸»é¡Œ: "${currentTheme}"
        `}]
      }],
      systemInstruction: systemInstruction,
      generationConfig: {
        responseMimeType: "application/json",
        responseSchema: responseSchema,
        temperature: 1.0, // æåˆ°æœ€é«˜ï¼Œè¿½æ±‚æœ€å¤§å‰µæ„
        topP: 0.95,
        topK: 40
      }
    };

    try {
      const result = await fetchWithRetry(apiUrl, payload);
      const candidate = result.candidates?.[0];
      if (candidate && candidate.content?.parts?.[0]?.text) {
        const jsonText = candidate.content.parts[0].text;
        const parsedJson = JSON.parse(jsonText);
        setSecondCharacter(parsedJson.character); // è‡ªå‹•å¡«å…¥
        setSettingInput(parsedJson.setting); // è‡ªå‹•å¡«å…¥
      } else {
        throw new Error('AI æœªèƒ½è¿”å›å»ºè­°ã€‚');
      }
    } catch (err) {
      console.error(err);
      setSuggestionError('AI å»ºè­°å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¼¸å…¥ã€‚');
    } finally {
      setIsSuggesting(false);
    }
  };


  /**
   * æ ¸å¿ƒåŠŸèƒ½ï¼šå‘¼å« Gemini API ç”Ÿæˆè…³æœ¬ (V4.0 å¤§å¹…ä¿®æ”¹)
   */
  const handleGenerateScript = async () => {
    if (!themeInput || !selectedPillar || !secondCharacter || !settingInput) {
      setError('è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ï¼šä¸»é¡Œã€ç¬¬äºŒè§’è‰²å’Œå ´æ™¯ã€‚');
      return;
    }

    setIsLoading(true);
    setError(null);
    setGeneratedScript(null);

    const pillarName = TONY_STUDIO_PILLARS.find(p => p.id === selectedPillar)?.name || 'æœªçŸ¥ç³»åˆ—';
    const apiKey = ""; // API Key æœƒåœ¨ç’°å¢ƒä¸­è‡ªå‹•æä¾›
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

    // 1. æ‰“é€ ç³»çµ±æŒ‡ä»¤ (System Instruction) - V4.0 å…¨æ–°ç°¡åŒ–ç‰ˆ
    // V4.14: æ–°å¢ TONY è€å¸«ç‚ºä¸»è§’çš„è¦å‰‡ï¼Œä¸¦æ ¹æ“šç³»åˆ—è‡ªå‹•èª¿æ•´é¢¨æ ¼
    const systemInstruction = {
      parts: [{ text: `
        æ‚¨æ˜¯ã€ŒTONY STUDIO SORA2 Prompt ç”Ÿæˆå™¨ã€ï¼Œä¸€å€‹å°ˆæ¥­çš„ AI å½±ç‰‡è…³æœ¬åŠ©æ‰‹ã€‚
        æ‚¨çš„ä»»å‹™æ˜¯åŸºæ–¼ç”¨æˆ¶æä¾›çš„ä¸»é¡Œã€è§’è‰²å’Œå ´æ™¯ï¼Œç”Ÿæˆä¸€ä»½ã€Œä¸­è‹±å°ç…§ã€çš„çµæ§‹åŒ–è…³æœ¬ï¼Œ
        ä¸¦**é¡å¤–ç”Ÿæˆå…©å€‹ã€Œç°¡æ½”çš„ã€SORA å‹å–„çš„ã€Prompt**ï¼šä¸€å€‹ç´”ä¸­æ–‡ç‰ˆï¼Œä¸€å€‹ç´”è‹±æ–‡ç‰ˆã€‚
        
        æ‚¨å¿…é ˆéµå®ˆ TONY STUDIO çš„å“ç‰Œè¦ç¯„ï¼š
        
        1.  **TONY è€å¸«æ˜¯ç•¶ç„¶ä¸»è§’**: 
            * **TONY è€å¸«** (ä¸€ä½æ™ºæ…§ã€æº«æš–ã€ç©¿è‘—æ™‚å°šé»‘è‰²ç³»æœè£çš„ç¾ä»£å°å¸«) **å¿…é ˆæ˜¯å½±ç‰‡çš„ä¸»è§’**ã€‚
            * ç”¨æˆ¶æä¾›çš„ã€Œç¬¬äºŒè§’è‰²ã€æ˜¯èˆ‡ TONY è€å¸«äº’å‹•çš„å°è±¡ã€‚
            * SORA Prompt ä¸­å¿…é ˆæ˜ç¢ºæå¯« TONY è€å¸«èˆ‡è©²è§’è‰²çš„äº’å‹•ã€‚
            
        2.  **é¢¨æ ¼ (Style)**: 
            * **ä¸»è¦é¢¨æ ¼ (Default)**: é›»å½±æ„Ÿã€é«˜ç«¯å•†æ¥­å“è³ªã€æº«æš–ã€å“²å­¸ã€æƒ…æ„Ÿå‹•äººã€‚
            * **é¢¨æ ¼èª¿æ•´ (Override)**: å¦‚æœæ•˜äº‹ç³»åˆ—æ˜¯ã€ŒğŸš€ å¿«æ¨‚æ„‰æ‚… Ã— å‰µæ„æœªä¾†ç³»åˆ—ã€ï¼Œé¢¨æ ¼æ‡‰èª¿æ•´ç‚ºï¼š**å……æ»¿æ´»åŠ›ã€è‰²å½©æ˜äº®ã€å¿«ç¯€å¥ã€å¹´è¼•åŒ–ã€å‰µæ„åè¶³**ã€‚
            
        3.  **æ ¸å¿ƒ (Core)**: æ™ºæ…§ã€è‡ªç„¶ã€äººæ–‡ã€é ˜å°åŠ›ã€å–„è‰¯ (å¿«æ¨‚ç³»åˆ—å¯æ›´å¼·èª¿ã€Œå‰µæ„ã€èˆ‡ã€Œæ´»åŠ›ã€)ã€‚
        
        4.  **è‰²èª¿ (Color Tone)**: 
            * **ä¸»è¦è‰²èª¿**: åå‘ã€Œæ·±è— Ã— é‡‘è‰²ã€çš„é«˜ç´šæ„Ÿã€‚
            * **è‰²èª¿èª¿æ•´**: å¦‚æœæ˜¯ã€Œå¿«æ¨‚æ„‰æ‚…ã€ç³»åˆ—ï¼Œè‰²èª¿æ‡‰æ”¹ç‚º **æ˜äº®ã€é£½å’Œã€å¤šå½© (Bright, Saturated, Colorful)**ã€‚
            
        5.  **æ ¼å¼**: æ‚¨çš„è¼¸å‡ºå¿…é ˆæ˜¯ JSON æ ¼å¼ï¼Œå®Œå…¨ç¬¦åˆæä¾›çš„ schemaã€‚
      `}]
    };

    // 2. æ‰“é€  V4.0 responseSchema (ä¸­è‹±å°ç…§ + ç°¡æ½” SORA Prompt)
    const responseSchema = {
      type: "OBJECT",
      properties: {
        "logline_zh": { 
          "type": "STRING", 
          "description": "ä¸­æ–‡æ•…äº‹ç·š (Logline): ç”¨ä¸€å¥è©±ç¸½çµé€™å€‹æ•…äº‹ï¼Œä¾‹å¦‚ï¼šä¸€ä½ç¾ä»£æ™ºè€…ï¼Œåœ¨ç«¹æ—ä¸­é‡è¦‹è€å­ï¼Œé ˜æ‚Ÿäº†æŸ”å¼±å‹å‰›å¼·çš„é“ç†ã€‚" 
        },
        "logline_en": {
          "type": "STRING",
          "description": "è‹±æ–‡æ•…äº‹ç·š (English Logline): e.g., A modern mentor meets Laozi in a bamboo forest, learning that true strength lies in softness."
        },
        "sora_prompt_zh": {
          "type": "STRING",
          "description": "ã€é—œéµã€‘ä¸€å€‹ç°¡æ½”çš„ã€SORA å‹å–„çš„ç´”ä¸­æ–‡ Promptã€‚å°‡æ‰€æœ‰è¦–è¦ºå…ƒç´ ã€è§’è‰²ã€å ´æ™¯å’Œæ•…äº‹ç¯€å¥æ¿ƒç¸®æˆä¸€æ®µæˆ–å…©æ®µç²¾ç°¡çš„ä¸­æ–‡æè¿°ã€‚ä¾‹å¦‚: ä¸€éƒ¨é›»å½±æ„Ÿçš„çŸ­ç‰‡ï¼Œé»ƒé‡‘æ™‚åˆ»ã€‚ä¸€ä½æ™ºæ…§çš„ç¾ä»£å°å¸«ï¼ˆTonyï¼‰å’Œä¸€ä½å¤ä»£è–äººï¼ˆè€å­ï¼‰éœååœ¨é™½å…‰ç‘è½çš„ç«¹æ—ä¸­ã€‚ç‰¹å¯«é¢¨ä¸­ç«¹è‘‰ã€æ°´é¢å…‰å½±ã€‚æ°›åœå¹³éœã€æ·±åˆ»ã€‚Tony è±ç„¶é–‹æœ—ã€‚çµå°¾é¡é ­ï¼šå»£è§’ï¼Œå…©äººå…±æœ›æ£®æ—ã€‚"
        },
        "sora_prompt_en": {
          "type": "STRING",
          "description": "ã€é—œéµã€‘ä¸€å€‹ç°¡æ½”çš„ã€SORA å‹å–„çš„ç´”è‹±æ–‡ Promptã€‚å°‡æ‰€æœ‰è¦–è¦ºå…ƒç´ ã€è§’è‰²ã€å ´æ™¯å’Œæ•…äº‹ç¯€å¥æ¿ƒç¸®æˆä¸€æ®µæˆ–å…©æ®µç²¾ç°¡çš„è‹±æ–‡æè¿°ã€‚ä¾‹å¦‚: A cinematic film, golden hour. A wise, modern mentor (Tony) and an ancient sage (Laozi) sit silently in a sunlit bamboo forest. Close-ups on wind in leaves, light on water. The mood is peaceful, reflective. Tony has a moment of clarity. Final shot: wide angle, both looking into the forest. (çµå°¾é‡‘å¥çš„æ–‡å­—å‹•ç•« *ä¸è¦* å¯«åœ¨é€™è£¡)"
        },
        "quotes": {
          "type": "OBJECT",
          "properties": {
            "main_zh": { "type": "STRING", "description": "ä¸­æ–‡ä¸»é‡‘å¥ (æ·±åˆ»ã€å“²å­¸)" },
            "sub_zh": { "type": "STRING", "description": "ä¸­æ–‡å‰¯å¥ (æƒ…æ„Ÿã€å»¶ä¼¸)" },
            "main_en": { "type": "STRING", "description": "è‹±æ–‡é‡‘å¥ (æ™®ä¸–åƒ¹å€¼)" }
          },
          "required": ["main_zh", "sub_zh", "main_en"]
        }
      },
      "required": ["logline_zh", "logline_en", "sora_prompt_zh", "sora_prompt_en", "quotes"]
    };

    // 3. çµ„åˆ Payload
    const payload = {
      contents: [{
        parts: [{ text: `
          è«‹ç”Ÿæˆä¸€æ”¯ TONY STUDIO é¢¨æ ¼çš„ SORA è…³æœ¬ã€‚
          - æ•˜äº‹ç³»åˆ—: "${pillarName}"
          - å‰µä½œä¸»é¡Œ: "${themeInput}"
          - ç¬¬äºŒè§’è‰²: "${secondCharacter}"
          - å ´æ™¯: "${settingInput}"
        `}]
      }],
      systemInstruction: systemInstruction,
      generationConfig: {
        responseMimeType: "application/json",
        responseSchema: responseSchema,
        temperature: 0.8,
      }
    };

    // 4. ç™¼é€è«‹æ±‚
    try {
      const result = await fetchWithRetry(apiUrl, payload);
      const candidate = result.candidates?.[0];

      if (candidate && candidate.content?.parts?.[0]?.text) {
        const jsonText = candidate.content.parts[0].text;
        const parsedJson = JSON.parse(jsonText);
        setGeneratedScript(parsedJson); // V4.0: å„²å­˜ JSON ç‰©ä»¶
      } else {
        throw new Error('AI æœªèƒ½è¿”å›æœ‰æ•ˆçš„è…³æœ¬å…§å®¹ã€‚');
      }
    } catch (err) {
      console.error(err);
      setError(`ç”Ÿæˆå¤±æ•—ï¼š${err.message}ã€‚è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚`);
      setGeneratedScript(getWelcomeScript(true)); // é¡¯ç¤ºéŒ¯èª¤æ™‚çš„ç¯„ä¾‹
    } finally {
      setIsLoading(false);
    }
  };

  /**
   * è¤‡è£½è…³æœ¬å…§å®¹åˆ°å‰ªè²¼ç°¿ (V4.0: æ”¹ç‚ºè¤‡è£½ sora_prompt_en)
   */
  const copyToClipboard = () => {
    if (!generatedScript || !generatedScript.sora_prompt_en) return;

    const scriptText = generatedScript.sora_prompt_en; // åªè¤‡è£½ SORA å°ˆç”¨çš„ç°¡æ½” Prompt

    const textarea = document.createElement('textarea');
    textarea.value = scriptText.trim();
    document.body.appendChild(textarea);
    textarea.select();
    try {
      document.execCommand('copy');
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error('ç„¡æ³•è¤‡è£½æ–‡å­—: ', err);
    }
    document.body.removeChild(textarea);
  };
  
  /**
   * V4.11: æ–°å¢ - è¤‡è£½ã€ŒSORA ç°¡æ½”ä¸­æ–‡è…³æœ¬ã€åˆ°å‰ªè²¼ç°¿
   */
  const copyZhPromptToClipboard = () => {
    if (!generatedScript || !generatedScript.sora_prompt_zh) return;

    const scriptText = generatedScript.sora_prompt_zh;

    const textarea = document.createElement('textarea');
    textarea.value = scriptText.trim();
    document.body.appendChild(textarea);
    textarea.select();
    try {
      document.execCommand('copy');
      setZhPromptCopied(true);
      setTimeout(() => setZhPromptCopied(false), 2000);
    } catch (err) {
      console.error('ç„¡æ³•è¤‡è£½ä¸­æ–‡è…³æœ¬: ', err);
    }
    document.body.removeChild(textarea);
  };

  /**
   * V4.12: é‡æ–°åŠ å…¥ - è¤‡è£½ã€Œçµå°¾å“²å­¸é‡‘å¥ã€åˆ°å‰ªè²¼ç°¿
   */
  const copyQuotesToClipboard = () => {
    if (!generatedScript || !generatedScript.quotes) return;

    const { main_zh, sub_zh, main_en } = generatedScript.quotes;
    const quotesText = `
ä¸­æ–‡ä¸»é‡‘å¥: ${main_zh}
ä¸­æ–‡å‰¯å¥: ${sub_zh}
è‹±æ–‡é‡‘å¥: ${main_en}
    `.trim();

    const textarea = document.createElement('textarea');
    textarea.value = quotesText;
    document.body.appendChild(textarea);
    textarea.select();
    try {
      document.execCommand('copy');
      setQuotesCopied(true);
      setTimeout(() => setQuotesCopied(false), 2000);
    } catch (err) {
      console.error('ç„¡æ³•è¤‡è£½é‡‘å¥: ', err);
    }
    document.body.removeChild(textarea);
  };

  /**
   * æ­¡è¿/éŒ¯èª¤æ™‚é¡¯ç¤ºçš„ç¯„ä¾‹è…³æœ¬ (V4.0: æ›´æ–°ç‚ºæ–°çš„ JSON çµæ§‹)
   */
  const getWelcomeScript = (isError = false) => {
    if (isError) {
      return {
        logline_zh: "AI è…³æœ¬ç”Ÿæˆå¤±æ•—ã€‚",
        logline_en: "AI script generation failed.",
        sora_prompt_zh: "éŒ¯èª¤ï¼šAI æœªèƒ½ç”Ÿæˆ SORA ä¸­æ–‡è…³æœ¬ã€‚è«‹æª¢æŸ¥éŒ¯èª¤è¨Šæ¯æˆ–é‡è©¦ã€‚",
        sora_prompt_en: "Error: AI failed to generate a SORA English prompt. Please check the error message or try again.",
        quotes: {
          main_zh: "è«‹æª¢æŸ¥æ‚¨çš„è¼¸å…¥æˆ–ç¶²è·¯é€£ç·šã€‚",
          sub_zh: "æ‚¨å¯ä»¥ç¨å¾Œé‡è©¦ã€‚",
          main_en: "Please check your input or network connection."
        }
      };
    }
    
    // V4.0 æ­¡è¿ç¯„ä¾‹
    return {
      logline_zh: "ä¸€ä½ç¾ä»£æ™ºè€…ï¼Œåœ¨ç«¹æ—ä¸­é‡è¦‹è€å­ï¼Œé ˜æ‚Ÿäº†æŸ”å¼±å‹å‰›å¼·çš„é“ç†ã€‚",
      logline_en: "A modern mentor meets Laozi in a bamboo forest, learning that true strength lies in softness.",
      sora_prompt_zh: `
ä¸€éƒ¨é›»å½±æ„Ÿçš„çŸ­ç‰‡ï¼Œé»ƒé‡‘æ™‚åˆ»ã€‚
ä¸€ä½æ™ºæ…§çš„ç¾ä»£å°å¸«ï¼ˆTonyï¼Œç°é«®ã€é»‘è¡£ï¼‰å’Œä¸€ä½å¤ä»£è–äººï¼ˆè€å­ï¼Œå‚³çµ±é•·è¢ï¼‰éœå
åœ¨é™½å…‰ç‘è½çš„ç«¹æ—ä¸­ã€‚
ç‰¹å¯«é¡é ­ï¼šé¢¨ä¸­ç«¹è‘‰ã€æ°´é¢å…‰å½±ã€‚æ°›åœå¹³éœã€æ·±åˆ»ã€å¯Œæœ‰å“²ç†ã€‚
Tony è±ç„¶é–‹æœ—ã€‚
çµå°¾é¡é ­ï¼šå»£è§’ï¼Œå…©äººå…±æœ› glowing æ£®æ—ï¼Œé¡é ­ç·©ç·©æ‹‰é ã€‚
      `.trim(),
      sora_prompt_en: `
A cinematic film, golden hour. A wise, modern mentor (Tony, gray hair, black outfit) and an ancient sage (Laozi, traditional robes) sit silently in a sunlit bamboo forest.
Close-ups on wind in leaves, light shimmering on water. The mood is peaceful, reflective, deeply philosophical.
Tony has a moment of quiet realization.
Final shot: wide angle, both looking into the glowing forest, camera slowly pulling back.
      `.trim(),
      quotes: {
        main_zh: "æŸ”ï¼Œæ˜¯ä¸€ç¨®æ¯”é‹¼æ›´å¤§çš„åŠ›é‡ã€‚",
        sub_zh: "ç•¶ä½ ä¸å†é€å¼·ï¼Œä¸–ç•Œæ‰çœ‹è¦‹ä½ çš„çœŸæ­£é«˜åº¦ã€‚",
        main_en: "When the heart softens, true strength begins."
      }
    };
  };

  // V3.0: æ–°å¢ä¸»é¡Œé¸æ“‡çš„è™•ç†å‡½æ•¸
  // V4.0: å¢åŠ è§¸ç™¼ AI æ™ºæ…§å»ºè­°
  const handleThemeSelect = (e) => {
    const newTheme = e.target.value;
    setSelectedTheme(newTheme);
    setThemeInput(newTheme); // è‡ªå‹•å¡«å…¥ä¸»é¡Œè¼¸å…¥æ¡†
    
    if (newTheme) {
      fetchSuggestions(newTheme); // V4.0: è§¸ç™¼æ™ºæ…§å»ºè­°
    } else {
      setSecondCharacter(''); // æ¸…ç©º
      setSettingInput(''); // æ¸…ç©º
    }
  };

  return (
    <div className="flex h-full min-h-screen font-sans bg-gray-900 text-white">
      {/* --- å·¦å´æ§åˆ¶é¢æ¿ --- */}
      <aside className="w-full max-w-md lg:w-1/3 xl:w-1/4 p-6 bg-gray-950 border-r border-gray-700 flex flex-col shadow-2xl">
        <header className="mb-6 border-b border-gray-700 pb-4">
          <h1 className="text-3xl font-bold text-white flex items-center">
            <Aperture className="text-indigo-400 w-8 h-8 mr-3" />
            TONY STUDIO
          </h1>
          <p className="text-lg text-indigo-300 font-light">SORA Prompt ç”Ÿæˆå™¨ (V4.0)</p>
        </header>

        {/* éŒ¯èª¤æç¤º */}
        {error && (
          <div className="bg-red-800 border border-red-600 text-white p-4 rounded-lg mb-4 text-sm" role="alert">
            <p className="font-bold">ç”Ÿæˆå¤±æ•—</p>
            <p>{error}</p>
          </div>
        )}
        {suggestionError && (
          <div className="bg-yellow-800 border border-yellow-600 text-white p-4 rounded-lg mb-4 text-sm" role="alert">
            <p className="font-bold">AI å»ºè­°å¤±æ•—</p>
            <p>{suggestionError}</p>
          </div>
        )}

        <form onSubmit={(e) => { e.preventDefault(); handleGenerateScript(); }} className="flex flex-col space-y-5">
          {/* 1. é¸æ“‡æ•˜äº‹æ”¯æŸ± */}
          <div className="relative">
            <label htmlFor="pillar" className="block text-sm font-medium text-gray-300 mb-2">
              <Brain className="w-4 h-4 inline-block mr-2" />
              1. é¸æ“‡æ•˜äº‹æ”¯æŸ±
            </label>
            <select
              id="pillar"
              value={selectedPillar}
              onChange={(e) => setSelectedPillar(e.target.value)}
              className="w-full pl-3 pr-10 py-2.5 text-base bg-gray-800 border border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"
            >
              {TONY_STUDIO_PILLARS.map((pillar) => (
                <option key={pillar.id} value={pillar.id}>
                  {pillar.name}
                </option>
              ))}
            </select>
            <ChevronDown className="w-5 h-5 text-gray-400 absolute right-3 top-10 pointer-events-none" />
          </div>

          {/* V3.0: 2. é¸æ“‡ä¸»é¡Œè®Šæ•¸ */}
          <div className="relative">
            <label htmlFor="theme-variable" className="block text-sm font-medium text-gray-300 mb-2">
              <TextQuote className="w-4 h-4 inline-block mr-2" />
              2. é¸æ“‡ä¸»é¡Œè®Šæ•¸ (V2.0)
            </label>
            <select
              id="theme-variable"
              value={selectedTheme}
              onChange={handleThemeSelect}
              className="w-full pl-3 pr-10 py-2.5 text-base bg-gray-800 border border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"
            >
              <option value="">-- è«‹å¾ {availableThemes.length} å€‹ä¸»é¡Œä¸­é¸æ“‡ --</option>
              {availableThemes.map((theme, index) => (
                <option key={index} value={theme}>
                  {theme}
                </option>
              ))}
            </select>
            <ChevronDown className="w-5 h-5 text-gray-400 absolute right-3 top-10 pointer-events-none" />
          </div>

          {/* 3. è¼¸å…¥å‰µä½œä¸»é¡Œ (å¯ä¿®æ”¹) */}
          <div>
            <label htmlFor="theme" className="block text-sm font-medium text-gray-300 mb-2">
              <Wand2 className="w-4 h-4 inline-block mr-2" />
              3. å‰µä½œä¸»é¡Œ (å¯ä¿®æ”¹)
            </label>
            <textarea
              id="theme"
              rows={2}
              value={themeInput}
              onChange={(e) => setThemeInput(e.target.value)}
              className="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"
              placeholder="å¯å¾ä¸Šæ–¹é¸å–®è‡ªå‹•å¡«å…¥ï¼Œæˆ–æ‰‹å‹•è¼¸å…¥..."
            />
          </div>

          {/* 4. è¼¸å…¥ç¬¬äºŒè§’è‰² */}
          <div className="relative">
            <label htmlFor="secondCharacter" className="block text-sm font-medium text-gray-300 mb-2">
              <User className="w-4 h-4 inline-block mr-2" />
              4. ç¬¬äºŒè§’è‰² (AI æ™ºæ…§å»ºè­°)
            </label>
            <textarea
              id="secondCharacter"
              rows={2}
              value={secondCharacter}
              onChange={(e) => setSecondCharacter(e.target.value)}
              className="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"
              placeholder="é¸æ“‡ä¸»é¡Œå¾Œ AI è‡ªå‹•å»ºè­°ï¼Œå¯ä¿®æ”¹..."
            />
            {isSuggesting && <Loader2 className="w-5 h-5 animate-spin text-indigo-400 absolute right-3 top-10" />}
          </div>

          {/* 5. è¼¸å…¥å ´æ™¯ */}
          <div className="relative">
            <label htmlFor="settingInput" className="block text-sm font-medium text-gray-300 mb-2">
              <Mountain className="w-4 h-4 inline-block mr-2" />
              5. å ´æ™¯ (AI æ™ºæ…§å»ºè­°)
            </label>
            <textarea
              id="settingInput"
              rows={2}
              value={settingInput}
              onChange={(e) => setSettingInput(e.target.value)}
              className="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"
              placeholder="é¸æ“‡ä¸»é¡Œå¾Œ AI è‡ªå‹•å»ºè­°ï¼Œå¯ä¿®æ”¹..."
            />
            {isSuggesting && <Loader2 className="w-5 h-5 animate-spin text-indigo-400 absolute right-3 top-10" />}
          </div>

          {/* 6. ç”ŸæˆæŒ‰éˆ• */}
          <button
            type="submit"
            disabled={isLoading || isSuggesting}
            className={`w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-lg text-white 
              ${(isLoading || isSuggesting) 
                ? 'bg-indigo-800 cursor-not-allowed' 
                : 'bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500'
              } 
              transition-colors duration-200 ease-in-out`}
          >
            {isLoading ? (
              <Loader2 className="w-6 h-6 animate-spin" />
            ) : (
              <span className="flex items-center">
                <Sparkles className="w-5 h-5 mr-2" />
                AI ç”Ÿæˆ SORA è…³æœ¬ (V4.0)
              </span>
            )}
          </button>
        </form>

        <div className="mt-auto pt-6 text-center text-gray-500 text-xs">
          <p>AI é©…å‹•çš„å½±ç‰‡å‰µæ„å·¥å…· V4.0</p>
          <p>ç‚º TONY è€å¸«å®¢è£½åŒ–</p>
        </div>
      </aside>

      {/* --- å³å´è…³æœ¬é¡¯ç¤ºå€ (V4.0 å…¨æ–°ä»‹é¢) --- */}
      <main className="w-full lg:w-2/3 xl:w-3/4 p-8 overflow-y-auto bg-gray-900">
        {isLoading && (
          <div className="flex flex-col items-center justify-center h-full text-center">
            <Loader2 className="w-16 h-16 animate-spin text-indigo-400" />
            <p className="text-2xl text-gray-300 mt-6 font-light">æ­£åœ¨ç‚ºæ‚¨ç”Ÿæˆ TONY STUDIO è…³æœ¬ (V4.0)...</p>
            <p className="text-lg text-gray-400 mt-2">AI æ­£åœ¨æ€è€ƒã€Œ${themeInput}ã€çš„å°æ¼”ç´š Prompt...</p>
          </div>
        )}

        {!isLoading && generatedScript && (
          <div className="max-w-3xl mx-auto space-y-8 animate-fadeIn">
            
            {/* V4.12: é‡æ–°åŠ å…¥ 1. æ•…äº‹ç·š (Logline) */}
            <div>
              <h3 className="text-3xl font-semibold text-white mb-6">æ•…äº‹ç·š (Logline)</h3>
              <div className="bg-gray-800 p-6 rounded-lg shadow-lg space-y-4">
                <div>
                  <p className="text-sm font-semibold text-indigo-300 mb-1">ä¸­æ–‡æ•…äº‹ç·š</p>
                  <p className="text-lg text-gray-200">{generatedScript.logline_zh}</p>
                </div>
                <div className="border-t border-gray-700 pt-4">
                  <p className="text-sm font-semibold text-indigo-300 mb-1">English Logline</p>
                  <p className="text-lg text-gray-200 font-sans italic">{generatedScript.logline_en}</p>
                </div>
              </div>
            </div>

            {/* V4.12: é‡æ–°åŠ å…¥ 2. çµå°¾å“²å­¸é‡‘å¥ (å«è¤‡è£½åŠŸèƒ½) */}
            <div>
              <div className="flex justify-between items-center mb-4">
                <h3 className="text-3xl font-semibold text-white">çµå°¾å“²å­¸é‡‘å¥</h3>
                <button
                  onClick={copyQuotesToClipboard}
                  className={`px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors duration-200 ${
                    quotesCopied
                    ? 'bg-green-600 text-white' 
                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                  }`}
                >
                  {quotesCopied ? <Check className="w-4 h-4 mr-2" /> : <Clipboard className="w-4 h-4 mr-2" />}
                  {quotesCopied ? 'é‡‘å¥å·²è¤‡è£½ï¼' : 'è¤‡è£½é‡‘å¥'}
                </button>
              </div>
              <div className="bg-gray-800 p-6 rounded-lg shadow-lg space-y-5">
                <QuoteLine label="ä¸­æ–‡ä¸»é‡‘å¥" text={generatedScript.quotes.main_zh} />
                <QuoteLine label="ä¸­æ–‡å‰¯å¥" text={generatedScript.quotes.sub_zh} />
                <QuoteLine label="è‹±æ–‡é‡‘å¥" text={generatedScript.quotes.main_en} isEnglish={true} />
              </div>
            </div>

            {/* 3. SORA æœ€çµ‚ Prompt (å¯è¤‡è£½) - V4.11 å‡ç´š */}
            <div>
              <h3 className="text-3xl font-semibold text-white mb-6">SORA æœ€çµ‚è…³æœ¬ (V4.11)</h3>
              
              {/* 3A. ä¸­æ–‡ SORA è…³æœ¬ */}
              <div className="mb-6">
                <div className="flex justify-between items-center mb-3">
                  <h4 className="text-xl font-semibold text-indigo-300">SORA ç°¡æ½”ä¸­æ–‡è…³æœ¬</h4>
                  <button
                    onClick={copyZhPromptToClipboard}
                    className={`px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors duration-200 ${
                      zhPromptCopied
                      ? 'bg-green-600 text-white' 
                      : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                    }`}
                  >
                    {zhPromptCopied ? <Check className="w-4 h-4 mr-2" /> : <Clipboard className="w-4 h-4 mr-2" />}
                    {zhPromptCopied ? 'å·²è¤‡è£½ï¼' : 'è¤‡è£½ä¸­æ–‡è…³æœ¬'}
                  </button>
                </div>
                <div className="bg-gray-800 p-6 rounded-lg shadow-lg">
                  <pre className="text-gray-200 text-base whitespace-pre-wrap break-words font-sans">
                    {generatedScript.sora_prompt_zh}
                  </pre>
                </div>
              </div>

              {/* 3B. è‹±æ–‡ SORA è…³æœ¬ */}
              <div>
                <div className="flex justify-between items-center mb-3">
                  <h4 className="text-xl font-semibold text-indigo-300">SORA ç°¡æ½”è‹±æ–‡è…³æœ¬</h4>
                  <button
                    onClick={copyToClipboard}
                    className={`px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors duration-200 ${
                      copied 
                      ? 'bg-green-600 text-white' 
                      : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                    }`}
                  >
                    {copied ? <Check className="w-4 h-4 mr-2" /> : <Clipboard className="w-4 h-4 mr-2" />}
                    {copied ? 'å·²è¤‡è£½ï¼' : 'è¤‡è£½è‹±æ–‡è…³Sæœ¬'}
                  </button>
                </div>
                <div className="bg-gray-800 p-6 rounded-lg shadow-lg">
                  <pre className="text-gray-200 text-base whitespace-pre-wrap break-words font-sans">
                    {generatedScript.sora_prompt_en}
                  </pre>
                </div>
              </div>
              
            </div>
            
          </div>
        )}
      </main>
    </div>
  );
}

// --- UI è¼”åŠ©çµ„ä»¶ ---

// V4.0: é‡‘å¥é¡¯ç¤ºè¡Œ (å¾ V2 æ¬å›)
const QuoteLine = ({ label, text, isEnglish = false }) => (
  <div className="border-l-4 border-indigo-500 pl-4">
    <p className="text-xs font-semibold text-gray-400">{label}</p>
    <p className={`text-lg text-white ${isEnglish ? 'font-serif italic' : 'font-medium'}`}>
      {text}
    </p>
  </div>
);


// ç°¡æ˜“æ·¡å…¥å‹•ç•«
const style = document.createElement('style');
style.innerHTML = `
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.5s ease-out forwards;
  }
`;
document.head.appendChild(style);